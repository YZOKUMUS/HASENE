<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hasene ArapÃ§a Oyunu</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Hasene ArapÃ§a">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="msapplication-config" content="browserconfig.xml">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="icon-192-v4-RED-MUSHAF.png">
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192-v4-RED-MUSHAF.png">
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512-v4-RED-MUSHAF.png">
    
    <!-- OsmanlÄ± Hafs HattÄ± Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ============ TEMEL AYARLAR ============ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: Arial, sans-serif;
            background: #667eea;
            min-height: 100vh;
            padding: 10px;
        }

        /* ============ KONTEYNER ============ */
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        /* ============ BAÅLIK ============ */
        .header {
            text-align: center;
            margin-bottom: 20px;
            color: #2D5F3F;
            position: relative;
        }

        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .settings-btn {
            position: absolute;
            right: 0;
            top: 0;
            background: #F4C430;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
        }

        /* ============ ANA MENÃœ ============ */
        .main-menu {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
        }

        .menu-item {
            background: linear-gradient(135deg, #2D5F3F 0%, #1E4D7B 100%);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            width: 100%;
            margin-bottom: 15px;
        }

        .menu-item:last-child {
            margin-bottom: 0;
        }

        .menu-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .menu-item:active {
            transform: translateY(0);
        }

        .menu-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .menu-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .menu-desc {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* ============ ÃœST BUTONLAR ============ */
        .top-btn {
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .top-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3) !important;
        }

        .top-btn:active {
            transform: translateY(0);
        }

        /* ============ GERÄ° BUTONU ============ */
        .back-btn {
            background: #666;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .back-btn:active {
            background: #555;
        }

        /* ============ MOD SEÃ‡Ä°CÄ° ============ */
        .mode-selector {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .mode-selector h3 {
            color: #2D5F3F;
            margin: 15px 0 10px 0;
            font-size: 1.1em;
        }

        .mode-btn, .diff-btn {
            display: block;
            width: 100%;
            background: white;
            border: 3px solid #ddd;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
            position: relative;
        }

        .mode-btn:hover, .diff-btn:hover {
            border-color: #2D5F3F;
            transform: translateX(5px);
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #2D5F3F 0%, #1E4D7B 100%);
            color: white;
            border-color: #2D5F3F;
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(45, 95, 63, 0.3);
        }
        
        .diff-btn.active {
            /* Renk JavaScript'te ayarlanÄ±yor */
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .mode-btn.active::after, .diff-btn.active::after {
            content: 'âœ“';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5em;
            font-weight: bold;
        }

        .mode-btn strong, .diff-btn strong {
            display: block;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .mode-btn small, .diff-btn small {
            display: block;
            opacity: 0.8;
        }

        .start-btn {
            width: 100%;
            background: #F4C430;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }

        .start-btn:active {
            background: #d4a820;
        }

        /* ============ OYUN BÄ°LGÄ°SÄ° ============ */
        .game-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 10px;
            font-size: 0.9em;
            color: #333;
        }

        .game-info div {
            font-weight: bold;
        }

        /* ============ Ä°STATÄ°STÄ°KLER ============ */
        .stats {
            display: flex;
            justify-content: space-between;
            gap: 6px;
            margin-bottom: 10px;
        }

        .stat {
            flex: 1;
            background: #2D5F3F;
            color: white;
            padding: 6px 8px;
            border-radius: 6px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.65em;
            opacity: 0.9;
            font-weight: 500;
        }

        .stat-value {
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 3px;
        }

        /* ============ Ä°LERLEME Ã‡UBUÄU ============ */
        .progress {
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 100%;
            background: #F4C430;
            width: 0%;
            transition: width 0.3s;
        }

        /* ============ OYUN ALANI ============ */
        .game-box {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .sure-info {
            text-align: center;
            color: #666;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .arabic {
            font-size: 16px;   /* ArapÃ§a metin iÃ§in bÃ¼yÃ¼k font boyutu */
            text-align: center;
            color: #2D5F3F;
            font-weight: bold;
            margin: 20px 0;
            direction: rtl;
            /* OsmanlÄ± Hafs HattÄ± - Kur'an yazÄ± tipi */
            font-family: 'Amiri Quran', 'Scheherazade New', 'Traditional Arabic', 'Arabic Typesetting', serif;
            font-weight: 400;
            line-height: 1.8;
            letter-spacing: 0;
        }

        /* ============ SES BUTONU ============ */
        .audio-btn {
            display: block;
            width: 100%;
            background: #F4C430;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            cursor: pointer;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .audio-btn:active {
            background: #d4a820;
        }

        /* ============ Ä°PUCU BUTONU ============ */
        .hint-btn {
            display: block;
            width: 100%;
            background: #64B5F6;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            cursor: pointer;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .hint-btn:active {
            background: #42A5F5;
        }

        .hint-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* ============ SEÃ‡ENEKLER ============ */
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {   /* Tek bir seÃ§enek butonu */
            background: white;
            border: 2px solid #ddd;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;       
            cursor: pointer;
            text-align: left;
        }

        .option:active {
            background: #f0f0f0;
        }

        .option.correct {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .option.wrong {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .option:disabled {
            cursor: default;
        }

        /* ============ GERÄ° BÄ°LDÄ°RÄ°M ============ */
        .feedback {
            text-align: center;
            font-size: 1.1em;
            font-weight: bold;
            min-height: 30px;
            margin: 15px 0;
        }

        .feedback.correct {
            color: #4CAF50;
        }

        .feedback.wrong {
            color: #f44336;
        }

        /* ============ SONRAKÄ° BUTON ============ */
        .next-btn {
            display: none;
            width: 100%;
            background: #2D5F3F;
            color: white;
            border: none;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.9em;
            cursor: pointer;
            font-weight: 500;
        }

        .next-btn:active {
            background: #1d3f2f;
        }

        /* ============ AYET & DUA MODLARI ============ */
        .ayet-card, .dua-card {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
        }

        .translation {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            color: #333;
            font-size: 1.1em;
            line-height: 1.6;
            text-align: center;
        }

        .pronunciation {
            background: #E3F2FD;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            color: #1565C0;
            font-size: 1em;
            font-style: italic;
            text-align: center;
        }

        .dua-title {
            text-align: center;
            color: #2D5F3F;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .navigation-btns {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .nav-btn {
            flex: 1;
            background: #2D5F3F;
            color: white;
            border: none;
            padding: 8px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: 500;
        }

        .nav-btn:active {
            background: #1d3f2f;
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* ============ DUA KATEGORÄ°LERÄ° ============ */
        .dua-categories {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .category-btn {
            background: white;
            border: 2px solid #2D5F3F;
            color: #2D5F3F;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .category-btn:active {
            background: #2D5F3F;
            color: white;
        }

        /* ============ HADÄ°S KARTI ============ */
        .hadis-card {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
        }

        .hadis-category {
            background: #2D5F3F;
            color: white;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            display: inline-block;
            margin-bottom: 10px;
        }

        .hadis-title {
            color: #2D5F3F;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .hadis-header {
            background: #E3F2FD;
            padding: 10px;
            border-radius: 8px;
            color: #1565C0;
            font-size: 0.95em;
            margin-bottom: 15px;
        }

        .hadis-text {
            background: white;
            padding: 15px;
            border-radius: 10px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 15px;
            text-align: justify;
        }

        .hadis-ref {
            background: #FFF3E0;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.85em;
            color: #E65100;
            margin-bottom: 15px;
        }

        /* ============ MODAL ============ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            width: 80%;
            max-width: 300px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
        }

        .modal h2 {
            color: #2D5F3F;
            font-size: 2em;
            margin-bottom: 15px;
        }

        .modal p {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .modal-btn {
            width: 100%;
            background: #F4C430;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Oyun Ä°statistikleri BarÄ± -->
        <div class="header" style="background: white; border: 2px solid #e0e0e0; border-radius: 15px; padding: 12px 15px; display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <!-- Puan -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 3px;">
                <div style="background: #FF9800; color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px;" id="gamePoints">0</div>
                <span style="font-size: 11px; color: #666;">Puan</span>
            </div>
            
            <!-- YÄ±ldÄ±z -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 3px;">
                <div style="display: flex; align-items: center; gap: 3px;">
                    <span style="font-size: 16px; color: #FFD700;">â­</span>
                    <span style="font-weight: bold; font-size: 14px; color: #333;" id="starPoints">0</span>
                </div>
                <span style="font-size: 11px; color: #666;">YÄ±ldÄ±z</span>
            </div>

            <!-- Rozet -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 3px;">
                <div style="display: flex; align-items: center; gap: 3px;">
                    <span style="font-size: 16px;" id="topBadgeIcon">ğŸ¥‰</span>
                    <span style="font-weight: bold; font-size: 14px; color: #333;" id="topBadgeCount">0</span>
                </div>
                <span style="font-size: 11px; color: #666;">Rozet</span>
            </div>
            
            <!-- Seviye -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                <div style="display: flex; align-items: center; gap: 3px;">
                    <span style="font-size: 11px; color: #666;">Lv</span>
                    <span style="background: #9C27B0; color: white; padding: 2px 6px; border-radius: 8px; font-weight: bold; font-size: 11px;" id="playerLevel">1</span>
                </div>
                <!-- Seviye Ä°lerleme Ã‡ubuÄŸu -->
                <div style="width: 60px; height: 3px; background: #e0e0e0; border-radius: 2px; overflow: hidden;">
                    <div style="height: 100%; background: #9C27B0; transition: width 0.3s;" id="levelProgress"></div>
                </div>
            </div>
        </div>

        <!-- Ana MenÃ¼ -->
        <div class="main-menu" id="mainMenu">
            <!-- Ãœst Butonlar -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 15px;">
                <button class="top-btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; padding: 12px; font-size: 0.9em; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 3px 10px rgba(102,126,234,0.3); cursor: pointer;" onclick="showDailyTasksModal()">
                    <span style="font-size: 1.2em;">ğŸ“‹</span>
                    GÃ¼nlÃ¼k GÃ¶revler
                </button>
                
                <button class="top-btn" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border: none; border-radius: 12px; padding: 12px; font-size: 0.9em; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 3px 10px rgba(245,87,108,0.3); cursor: pointer;" onclick="showBadgesModal()">
                    <span style="font-size: 1.2em;">ğŸ†</span>
                    BaÅŸarÄ±lar
                </button>
                
                <button class="top-btn" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; border: none; border-radius: 12px; padding: 12px; font-size: 0.9em; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 3px 10px rgba(168,237,234,0.4); cursor: pointer;" onclick="alert('Ä°statistikler - YakÄ±nda!')">
                    <span style="font-size: 1.2em;">ğŸ“Š</span>
                    Ä°statistikler
                </button>
                
                <button class="top-btn" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; border: none; border-radius: 12px; padding: 12px; font-size: 0.9em; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 8px; box-shadow: 0 3px 10px rgba(79,172,254,0.3); cursor: pointer;" onclick="showCalendarModal()"
                    <span style="font-size: 1.2em;">ğŸ“…</span>
                    Takvim
                </button>
            </div>
            
            <!-- Zorluk ButonlarÄ± -->
            <div style="display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: nowrap; justify-content: center;">
                <button class="diff-btn" id="mainDiffKolay" style="flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: white; color: #4CAF50; border: 2px solid #4CAF50;">
                    <strong>ğŸŒ± Kolay</strong>
                </button>
                <button class="diff-btn active" id="mainDiffOrta" style="flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: #FF9800; color: white; border: 2px solid #FF9800;">
                    <strong>âš–ï¸ Orta</strong>
                </button>
                <button class="diff-btn" id="mainDiffZor" style="flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: white; color: #f44336; border: 2px solid #f44336;">
                    <strong>ğŸ”¥ Zor</strong>
                </button>
            </div>

            <h2 style="text-align: center; color: #2D5F3F; margin-bottom: 15px;">Oyun Modu SeÃ§</h2>
            
            <button class="menu-item" id="kelimeCevirBtn" style="margin-bottom: 10px; padding: 12px; background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%); color: #8b4513; box-shadow: 0 4px 15px rgba(255,215,0,0.4); border: 2px solid #daa520;">
                <div class="menu-icon" style="font-size: 1.8em; margin-bottom: 3px;">ğŸ“š</div>
                <div class="menu-title" style="font-size: 1em; font-weight: bold;">Kelime Ã‡evir</div>
                <div class="menu-desc" style="font-size: 0.8em;">ArapÃ§a kelimeyi TÃ¼rkÃ§e'ye Ã§evir</div>
            </button>

            <button class="menu-item" id="dinleBulBtn" style="margin-bottom: 10px; padding: 12px; background: linear-gradient(135deg, #74c0fc 0%, #339af0 100%); color: white; box-shadow: 0 4px 15px rgba(51,154,240,0.3);">
                <div class="menu-icon" style="font-size: 1.8em; margin-bottom: 3px;">ğŸ§</div>
                <div class="menu-title" style="font-size: 1em;">Dinle ve Bul</div>
                <div class="menu-desc" style="font-size: 0.8em;">Kelimeyi dinle, doÄŸru kelimeyi bul</div>
            </button>

            <button class="menu-item" id="boslukDoldurBtn" style="margin-bottom: 10px; padding: 12px; background: linear-gradient(135deg, #9775fa 0%, #7048e8 100%); color: white; box-shadow: 0 4px 15px rgba(112,72,232,0.3);">
                <div class="menu-icon" style="font-size: 1.8em; margin-bottom: 3px;">âœï¸</div>
                <div class="menu-title" style="font-size: 1em;">BoÅŸluk Doldur</div>
                <div class="menu-desc" style="font-size: 0.8em;">Ayetteki eksik kelimeyi tamamla</div>
            </button>

            <button class="menu-item" id="duaEtBtn" style="margin-bottom: 10px; padding: 12px; background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%); color: white; box-shadow: 0 4px 15px rgba(55,178,77,0.3);">
                <div class="menu-icon" style="font-size: 1.8em; margin-bottom: 3px;">ğŸ¤²</div>
                <div class="menu-title" style="font-size: 1em;">Dua Et ve Dinle</div>
                <div class="menu-desc" style="font-size: 0.8em;">Kur'an'dan dualarÄ± Ã¶ÄŸren</div>
            </button>

            <button class="menu-item" id="ayetOkuBtn" style="margin-bottom: 10px; padding: 12px; background: linear-gradient(135deg, #4dabf7 0%, #1c7ed6 100%); color: white; box-shadow: 0 4px 15px rgba(28,126,214,0.3);">
                <div class="menu-icon" style="font-size: 1.8em; margin-bottom: 3px;">ğŸ“–</div>
                <div class="menu-title" style="font-size: 1em;">Ayet Oku ve Dinle</div>
                <div class="menu-desc" style="font-size: 0.8em;">Ayetleri dinle ve oku</div>
            </button>

            <button class="menu-item" id="hadisOkuBtn" style="margin-bottom: 0; padding: 12px; background: linear-gradient(135deg, #ff8787 0%, #fa5252 100%); color: white; box-shadow: 0 4px 15px rgba(250,82,82,0.3);">
                <div class="menu-icon" style="font-size: 1.8em; margin-bottom: 3px;">ğŸ“œ</div>
                <div class="menu-title" style="font-size: 1em;">Hadis Oku</div>
                <div class="menu-desc" style="font-size: 0.8em;">Hadis-i Åerifleri oku</div>
            </button>
        </div>

        <!-- Kelime Ã‡evir Alt Mod SeÃ§imi -->
        <div class="mode-selector" id="modeSelector" style="display: none;">
            <button class="back-btn" id="backToMenuBtn">â† Geri</button>
            
            <h3>ğŸ“š Kelime Ã‡evir - Oyun Modu SeÃ§</h3>
            <div id="modeButtons"></div>
            
            <button class="start-btn" id="startBtn">Oyunu BaÅŸlat</button>
        </div>

        <!-- Ayet Okuma Modu -->
        <div class="ayet-mode" id="ayetMode" style="display: none;">
            <button class="back-btn" id="backFromAyetBtn">â† Geri</button>
            <div class="ayet-card">
                <div class="sure-info" id="ayetSureInfo">YÃ¼kleniyor...</div>
                <div class="arabic" id="ayetArabic">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
                <div class="translation" id="ayetTranslation">YÃ¼kleniyor...</div>
                <button class="audio-btn" id="ayetAudioBtn">ğŸ”Š Ayeti Dinle</button>
                <div class="navigation-btns">
                    <button class="nav-btn" id="prevAyetBtn">â† Ã–nceki</button>
                    <button class="nav-btn" id="nextAyetBtn">Sonraki â†’</button>
                </div>
            </div>
        </div>

        <!-- Dua Modu -->
        <div class="dua-mode" id="duaMode" style="display: none;">
            <button class="back-btn" id="backFromDuaBtn">â† Geri</button>
            <div class="dua-card">
                <div class="sure-info" id="duaSureInfo">YÃ¼kleniyor...</div>
                <div class="arabic" id="duaArabic">ArapÃ§a Metin</div>
                <div class="translation" id="duaTranslation">AnlamÄ±</div>
                <button class="audio-btn" id="duaAudioBtn">ğŸ”Š DuayÄ± Dinle</button>
                <div class="navigation-btns">
                    <button class="nav-btn" id="prevDuaBtn">â† Ã–nceki</button>
                    <button class="nav-btn" id="nextDuaBtn">Sonraki â†’</button>
                </div>
            </div>
        </div>

        <!-- Hadis Oku Modu -->
        <div class="hadis-mode" id="hadisMode" style="display: none;">
            <button class="back-btn" id="backFromHadisBtn">â† Geri</button>
            <div class="hadis-card">
                <div class="hadis-category" id="hadisCategory">Kategori</div>
                <div class="hadis-title" id="hadisTitle">BaÅŸlÄ±k</div>
                <div class="hadis-header" id="hadisHeader">Ravi</div>
                <div class="hadis-text" id="hadisText">Hadis Metni</div>
                <div class="hadis-ref" id="hadisRef">Referans</div>
                <div class="navigation-btns">
                    <button class="nav-btn" id="prevHadisBtn">â† Ã–nceki</button>
                    <button class="nav-btn" id="nextHadisBtn">Sonraki â†’</button>
                </div>
            </div>
        </div>

        <!-- BoÅŸluk Doldur Modu -->
        <div class="bosluk-mode" id="boslukMode" style="display: none;">
            <button class="back-btn" id="backFromBoslukBtn">â† Geri</button>
            
            <!-- Ä°statistikler -->
            <div class="stats">
                <div class="stat">
                    <div class="stat-label">Puan</div>
                    <div class="stat-value" id="boslukScore">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">DoÄŸru</div>
                    <div class="stat-value" id="boslukCorrect">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">YanlÄ±ÅŸ</div>
                    <div class="stat-value" id="boslukWrong">0</div>
                </div>
            </div>

            <div class="game-box">
                <div class="sure-info" id="boslukSureInfo">YÃ¼kleniyor...</div>
                <div class="arabic" id="boslukAyetText">Ayet metni yÃ¼kleniyor...</div>
                <button class="audio-btn" id="boslukAudioBtn">ğŸ”Š Ayeti Dinle</button>
                <div class="options" id="boslukOptions"></div>
                <div class="feedback" id="boslukFeedback"></div>
                <button class="next-btn" id="boslukNextBtn">Sonraki Soru â†’</button>
            </div>
        </div>

        <!-- Dinle ve Bul Modu -->
        <div class="dinle-mode" id="dinleMode" style="display: none;">
            <button class="back-btn" id="backFromDinleBtn">â† Geri</button>
            
            <!-- Ä°statistikler -->
            <div class="stats">
                <div class="stat">
                    <div class="stat-label">Puan</div>
                    <div class="stat-value" id="dinleScore">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">DoÄŸru</div>
                    <div class="stat-value" id="dinleCorrect">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">YanlÄ±ÅŸ</div>
                    <div class="stat-value" id="dinleWrong">0</div>
                </div>
            </div>

            <div class="game-box">
                <div class="sure-info" id="dinleSureInfo">Ses dosyasÄ±nÄ± dinle</div>
                <div style="text-align: center; margin: 30px 0;">
                    <div style="font-size: 4em;">ğŸ§</div>
                </div>
                <button class="audio-btn" id="dinleAudioBtn">ğŸ”Š Kelimeyi Dinle</button>
                <div class="options" id="dinleOptions"></div>
                <div class="feedback" id="dinleFeedback"></div>
                <button class="next-btn" id="dinleNextBtn">Sonraki Soru â†’</button>
            </div>
        </div>

        <!-- Oyun EkranÄ± -->
        <div class="game-screen" id="gameScreen" style="display: none;">
        <button class="back-btn" id="backFromGameBtn">â† Geri</button>

        <!-- Ä°statistikler -->
        <div class="stats">
            <div class="stat">
                <div class="stat-label">Puan</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">Seviye</div>
                <div class="stat-value" id="level">1</div>
            </div>
            <div class="stat">
                <div class="stat-label">DoÄŸru</div>
                <div class="stat-value" id="correct">0</div>
            </div>
            <div class="stat">
                <div class="stat-label">YanlÄ±ÅŸ</div>
                <div class="stat-value" id="wrong">0</div>
            </div>
        </div>

        <!-- Can ve SÃ¼re -->
        <div class="game-info">
            <div id="livesDisplay" style="display: none;">
                â¤ï¸ Can: <span id="lives">3</span>
            </div>
            <div id="timerDisplay" style="display: none;">
                â±ï¸ SÃ¼re: <span id="timer">30</span>s
            </div>
            <div>
                ğŸ“Š Mod: <span id="currentMode">Klasik</span>
            </div>
        </div>

        <!-- Ä°lerleme -->
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <!-- Oyun AlanÄ± -->
        <div class="game-box">
            <div class="sure-info" id="sureInfo">YÃ¼kleniyor...</div>
            <div class="arabic" id="arabicWord">Ø±ÙÙƒÙÙ‘Ø¨ÙÙƒÙ</div>
            <button class="audio-btn" id="audioBtn">ğŸ”Š Sesi Dinle</button>
            <button class="hint-btn" id="hintBtn" style="display: none;">ğŸ’¡ Ä°pucu</button>
            <div class="options" id="options"></div>
            <div class="feedback" id="feedback"></div>
            <button class="next-btn" id="nextBtn">Sonraki Soru â†’</button>
        </div>
        </div>  <!-- gameScreen sonu -->
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h2>ğŸ‰ Tebrikler!</h2>
            <p>Seviye <span id="newLevel"></span>'e yÃ¼kseldiniz!</p>
            <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
                Toplam PuanÄ±nÄ±z: <strong id="modalTotalPoints">0</strong><br>
                Bir sonraki seviye iÃ§in: <strong id="modalNextLevelPoints">0</strong> puan gerekli
            </p>
            <button class="modal-btn" id="modalBtn">Devam Et</button>
        </div>
    </div>

    <!-- BaÅŸarÄ±lar Modal -->
    <div class="modal" id="badgesModal">
        <div class="modal-content" style="max-width: 400px; max-height: 80vh; overflow-y: auto;">
            <h3 style="margin: 15px 0 10px 0; font-size: 1.3em;">ğŸ† BaÅŸarÄ±larÄ±nÄ±z</h3>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0;">
                <!-- Elmas -->
                <div style="text-align: center; padding: 15px; border-radius: 12px; background: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%);">
                    <div style="font-size: 2em;">ğŸ’</div>
                    <div style="font-weight: bold; margin: 5px 0;">Elmas</div>
                    <div style="font-size: 1.5em; font-weight: bold; color: #00bcd4;" id="diamondBadgeCount">0</div>
                    <div style="font-size: 0.8em; color: #666;">5 AltÄ±n = 1 Elmas</div>
                </div>
                
                <!-- AltÄ±n -->
                <div style="text-align: center; padding: 15px; border-radius: 12px; background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);">
                    <div style="font-size: 2em;">ğŸ¥‡</div>
                    <div style="font-weight: bold; margin: 5px 0;">AltÄ±n</div>
                    <div style="font-size: 1.5em; font-weight: bold; color: #ff9800;" id="goldBadgeCount">0</div>
                    <div style="font-size: 0.8em; color: #666;">5 GÃ¼mÃ¼ÅŸ = 1 AltÄ±n</div>
                </div>
                
                <!-- GÃ¼mÃ¼ÅŸ -->
                <div style="text-align: center; padding: 15px; border-radius: 12px; background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);">
                    <div style="font-size: 2em;">ğŸ¥ˆ</div>
                    <div style="font-weight: bold; margin: 5px 0;">GÃ¼mÃ¼ÅŸ</div>
                    <div style="font-size: 1.5em; font-weight: bold; color: #9c27b0;" id="silverBadgeCount">0</div>
                    <div style="font-size: 0.8em; color: #666;">5 Bronz = 1 GÃ¼mÃ¼ÅŸ</div>
                </div>
                
                <!-- Bronz -->
                <div style="text-align: center; padding: 15px; border-radius: 12px; background: linear-gradient(135deg, #fff3e0 0%, #ffcc80 100%);">
                    <div style="font-size: 2em;">ğŸ¥‰</div>
                    <div style="font-weight: bold; margin: 5px 0;">Bronz</div>
                    <div style="font-size: 1.5em; font-weight: bold; color: #ff5722;" id="bronzeBadgeCount">0</div>
                    <div style="font-size: 0.8em; color: #666;">5 YÄ±ldÄ±z = 1 Bronz</div>
                </div>
            </div>
            
            <div style="text-align: center; margin: 15px 0; padding: 10px; background: #f5f5f5; border-radius: 8px;">
                <div style="font-size: 1.1em; margin-bottom: 5px;">ğŸ“Š Ä°lerlemeniz</div>
                <div>â­ <span id="badgesModalStars">0</span> YÄ±ldÄ±z</div>
                <div>ğŸ“ˆ <span id="badgesModalLevel">1</span>. Seviye</div>
                <div>ğŸ¯ <span id="badgesModalPoints">0</span> Puan</div>
            </div>
            
            <button class="modal-btn" onclick="closeBadgesModal()">Kapat</button>
        </div>
    </div>

    <!-- Takvim Modal -->
    <div class="modal" id="calendarModal">
        <div class="modal-content" style="max-width: 400px; max-height: 85vh; overflow-y: auto;">
            <h3 style="margin: 12px 0 8px 0; font-size: 1.1em;">ğŸ“… GÃ¼nlÃ¼k Takip</h3>
            
            <!-- Streak Bilgisi -->
            <div style="text-align: center; margin: 12px 0; padding: 8px; background: linear-gradient(135deg, #ff9800 0%, #ff5722 100%); border-radius: 6px; color: white;">
                <span style="font-size: 1em;">ğŸ”¥</span>
                <span style="font-size: 1.1em; font-weight: bold; margin: 0 6px;" id="currentStreak">0</span>
                <span style="font-size: 0.75em;">ArdÄ±ÅŸÄ±k GÃ¼n</span>
            </div>
            
            <!-- Ä°statistikler -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin: 12px 0;">
                <div style="text-align: center; padding: 8px; background: #f5f5f5; border-radius: 6px;">
                    <div style="font-size: 1em; font-weight: bold; color: #4caf50;" id="totalPlayDays">0</div>
                    <div style="font-size: 0.7em; color: #666;">Toplam Oyun GÃ¼nÃ¼</div>
                </div>
                <div style="text-align: center; padding: 8px; background: #f5f5f5; border-radius: 6px;">
                    <div style="font-size: 1em; font-weight: bold; color: #2196f3;" id="bestStreak">0</div>
                    <div style="font-size: 0.7em; color: #666;">En Ä°yi Streak</div>
                </div>
            </div>
            
            <!-- Mini Takvim -->
            <div style="background: white; border: 2px solid #e0e0e0; border-radius: 8px; padding: 12px; margin: 12px 0;">
                <div style="text-align: center; font-weight: bold; margin-bottom: 8px; font-size: 0.9em;" id="calendarMonth">KasÄ±m 2025</div>
                <div id="calendarGrid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 3px; text-align: center;">
                    <!-- Takvim gÃ¼nleri buraya eklenecek -->
                </div>
            </div>
            
            <!-- BugÃ¼nkÃ¼ Hedef -->
            <div style="background: #e8f5e8; border-radius: 6px; padding: 8px; margin: 12px 0;">
                <div style="font-weight: bold; margin-bottom: 4px; color: #2e7d2e; font-size: 0.8em;">ğŸ¯ BugÃ¼nkÃ¼ Hedefin</div>
                <div style="font-size: 0.7em; color: #666;">5 doÄŸru cevap vererek gÃ¼nÃ¼ tamamla!</div>
                <div style="margin-top: 4px; font-size: 0.8em;">
                    <span id="todayProgress">0</span>/5 âœ…
                </div>
            </div>
            
            <button class="modal-btn" onclick="closeCalendarModal()">Kapat</button>
        </div>
    </div>

    <!-- GÃ¼nlÃ¼k GÃ¶revler Modal -->
    <div class="modal" id="dailyTasksModal">
        <div class="modal-content" style="max-width: 480px; max-height: 80vh; overflow-y: auto;">
            <h3 style="margin: 12px 0 8px 0; font-size: 1.1em;">ğŸ¯ GÃ¼nlÃ¼k GÃ¶revler</h3>
            
            <!-- Genel Ä°lerleme -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px; border-radius: 8px; margin: 12px 0; text-align: center;">
                <div style="font-size: 0.95em; font-weight: bold;">BugÃ¼nkÃ¼ Ä°lerleme</div>
                <div style="font-size: 0.8em; margin-top: 4px;">
                    <span id="completedTasks">0</span>/<span id="totalTasks">5</span> GÃ¶rev TamamlandÄ±
                </div>
                <div style="background: rgba(255,255,255,0.3); border-radius: 10px; height: 6px; margin: 6px 0;">
                    <div id="taskProgress" style="background: white; height: 100%; border-radius: 10px; width: 0%; transition: width 0.3s;"></div>
                </div>
            </div>

            <!-- Temel GÃ¶revler -->
            <div style="margin: 16px 0;">
                <h4 style="margin: 8px 0; color: #333; font-size: 0.95em;">ğŸ“‹ Temel GÃ¶revler</h4>
                
                <div id="dailyTasksList">
                    <!-- GÃ¶revler buraya dinamik eklenecek -->
                </div>
            </div>

            <!-- Bonus GÃ¶revler -->
            <div style="margin: 16px 0;">
                <h4 style="margin: 8px 0; color: #333; font-size: 0.95em;">â­ Bonus GÃ¶revler</h4>
                
                <div id="bonusTasksList">
                    <!-- Bonus gÃ¶revler buraya dinamik eklenecek -->
                </div>
            </div>

            <!-- Ã–dÃ¼l Toplama -->
            <div id="rewardsSection" style="display: none; background: #e8f5e8; border-radius: 8px; padding: 12px; margin: 12px 0; text-align: center;">
                <div style="font-size: 1em; color: #2e7d2e; font-weight: bold;">ğŸ‰ Tebrikler!</div>
                <div style="font-size: 0.8em; color: #666; margin: 4px 0;">TÃ¼m gÃ¶revleri tamamladÄ±n!</div>
                <button id="claimRewardsBtn" onclick="claimDailyRewards()" style="background: #4caf50; color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 0.8em; cursor: pointer;">
                    +5 â­ Ã–dÃ¼l Topla
                </button>
            </div>

            <button class="modal-btn" onclick="closeDailyTasksModal()">Kapat</button>
        </div>
    </div>

    <!-- Oyun Bitti Modal -->
    <div class="modal" id="gameOverModal">
        <div class="modal-content">
            <h2 id="gameOverTitle">ğŸ˜¢ Oyun Bitti</h2>
            <p id="gameOverText"></p>
            <p>Toplam Puan: <strong id="finalScore">0</strong></p>
            <button class="modal-btn" id="restartBtn">Yeniden BaÅŸla</button>
        </div>
    </div>

    <script>
        // DOM yÃ¼klendikten sonra Ã§alÄ±ÅŸtÄ±r
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ DOM yÃ¼klendi, oyun baÅŸlatÄ±lÄ±yor...');
            
        // ============ AYARLAR - BURADAN KONTROLEDEBÄ°LÄ°RSÄ°N ============
        const CONFIG = {
            // OYUN MODLARI
            gameModes: {
                klasik: {
                    name: 'ğŸ“š Klasik',
                    description: 'Normal oyun modu',
                    questionsPerLevel: 10,
                    timeLimit: 0,  // 0 = sÃ¼re yok
                    lives: 0,      // 0 = sÄ±nÄ±rsÄ±z can
                    showHint: true
                },
                hizli: {
                    name: 'âš¡ HÄ±zlÄ±',
                    description: '30 saniye sÃ¼re',
                    questionsPerLevel: 15,
                    timeLimit: 30,
                    lives: 0,
                    showHint: false
                },
                hayat: {
                    name: 'â¤ï¸ 3 Can',
                    description: '3 hak, yanlÄ±ÅŸ = -1 can',
                    questionsPerLevel: 20,
                    timeLimit: 0,
                    lives: 3,
                    showHint: true
                },
                zorluk: {
                    name: 'ğŸ”¥ Zorluk',
                    description: 'Sadece zor kelimeler',
                    questionsPerLevel: 10,
                    timeLimit: 20,
                    lives: 3,
                    showHint: false,
                    minDifficulty: 7  // 7-10 arasÄ± zorluk
                }
            },

            // ZORLUK SEVÄ°YELERÄ° (EÅŸit DaÄŸÄ±lÄ±mlÄ±: Her biri ~4945 kelime)
            difficultyLevels: {
                kolay: {
                    name: 'ğŸ˜Š Kolay',
                    minDiff: 5,
                    maxDiff: 9,
                    pointsMultiplier: 1
                },
                orta: {
                    name: 'ğŸ˜ Orta',
                    minDiff: 10,
                    maxDiff: 11,
                    pointsMultiplier: 2
                },
                zor: {
                    name: 'ğŸ˜¤ Zor',
                    minDiff: 12,
                    maxDiff: 21,
                    pointsMultiplier: 3
                },
                karisik: {
                    name: 'ğŸ² KarÄ±ÅŸÄ±k',
                    minDiff: 5,
                    maxDiff: 21,
                    pointsMultiplier: 2
                }
            },

            // VARSAYILAN AYARLAR
            defaultMode: 'klasik',
            defaultDifficulty: 'orta',  // UI'da mevcut olan zorluk seviyesi
            wrongAnswerPenalty: 5  // YanlÄ±ÅŸ cevap puan cezasÄ±
        };

        // ============ OYUN DURUMU ============
        let kelimeBulData = [];  // kelimebul.json
        let ayetOkuData = [];    // ayetoku.json
        let duaData = [];        // duaet.json
        let hadisData = [];      // hadisoku.json
        
        let currentQuestion = null;
        let currentAyetIndex = 0;
        let currentDuaIndex = 0;
        let currentHadisIndex = 0;
        
        // Ses kontrolÃ¼ iÃ§in
        let currentAudio = null;
        
        // Kelime Ã‡evir oyunu iÃ§in
        let kelimeCevirScore = 0;
        let kelimeCevirCorrect = 0;
        let kelimeCevirWrong = 0;
        
        // Dinle ve Bul oyunu iÃ§in
        let dinleScore = 0;
        let dinleCorrect = 0;
        let dinleWrong = 0;
        
        // BoÅŸluk Doldur oyunu iÃ§in
        let boslukScore = 0;
        let boslukCorrect = 0;
        let boslukWrong = 0;
        
        // GLOBAL (KALICI) PUANLAR
        let totalPoints = 0;  // Toplam oyun puanÄ± (kalÄ±cÄ±)
        let starPoints = 0;   // YÄ±ldÄ±z puanÄ± (her 500 puan = 1 yÄ±ldÄ±z)
        let level = 1;        // Global seviye

        // ROZET SÄ°STEMÄ°
        let badges = {
            bronze: 0,   // Bronz rozetler (5 yÄ±ldÄ±z = 1 bronz)
            silver: 0,   // GÃ¼mÃ¼ÅŸ rozetler (5 bronz = 1 gÃ¼mÃ¼ÅŸ)
            gold: 0,     // AltÄ±n rozetler (5 gÃ¼mÃ¼ÅŸ = 1 altÄ±n)
            diamond: 0   // Elmas rozetler (5 altÄ±n = 1 elmas)
        };

        // STREAK SÄ°STEMÄ° (GÃœNLÄ°K TAKÄ°P)
        let streakData = {
            currentStreak: 0,    // Mevcut ardÄ±ÅŸÄ±k gÃ¼n sayÄ±sÄ±
            bestStreak: 0,       // En iyi streak rekoru
            lastPlayDate: '',    // Son oyun oynanan tarih (YYYY-MM-DD)
            totalPlayDays: 0,    // Toplam oyun oynanan gÃ¼n sayÄ±sÄ±
            dailyGoal: 5,        // GÃ¼nlÃ¼k hedef (doÄŸru cevap sayÄ±sÄ±)
            todayProgress: 0,    // BugÃ¼nkÃ¼ ilerleme
            todayDate: '',       // BugÃ¼nÃ¼n tarihi
            playDates: []        // Oyun oynanan tarihler listesi
        };

        // GÃœNLÄ°K GÃ–REVLER SÄ°STEMÄ°
        let dailyTasks = {
            lastTaskDate: '',    // Son gÃ¶rev yenileme tarihi
            tasks: [],           // GÃ¼nlÃ¼k gÃ¶revler listesi
            bonusTasks: [],      // Bonus gÃ¶revler listesi
            completedTasks: [],  // Tamamlanan gÃ¶revler
            rewardsClaimed: false, // Ã–dÃ¼l toplandÄ± mÄ±?
            todayStats: {        // BugÃ¼nkÃ¼ oyun istatistikleri
                kelimeCevir: 0,
                dinleBul: 0,
                boslukDoldur: 0,
                ayetOku: 0,
                duaOgre: 0,
                hadisOku: 0,
                toplamDogru: 0,
                toplamPuan: 0,
                perfectStreak: 0,
                farklÄ±Zorluk: new Set()
            }
        };

        // SESSION (OYUN Ä°Ã‡Ä°) PUANLAR
        let sessionScore = 0;     // Bu oyunun puanÄ±
        let sessionCorrect = 0;   // Bu oyunun doÄŸru sayÄ±sÄ±
        let sessionWrong = 0;     // Bu oyunun yanlÄ±ÅŸ sayÄ±sÄ±

        // ESKI DEÄÄ°ÅKENLER (Geriye uyumluluk iÃ§in)
        let score = 0;
        let correct = 0;
        let wrong = 0;
        let questionCount = 0;
        let currentMode = CONFIG.defaultMode;
        let currentDifficulty = CONFIG.defaultDifficulty;
        
        console.log('Session deÄŸiÅŸkenleri baÅŸlatÄ±ldÄ±:', {sessionScore, sessionCorrect, sessionWrong});
        console.log(`ğŸ VarsayÄ±lan zorluk seviyesi: ${currentDifficulty}`);
        let lives = 0;
        let timer = null;
        let timeLeft = 0;

        // ============ DOM ELEMANLARI ============
        const elements = {
            // Ana menÃ¼
            mainMenu: document.getElementById('mainMenu'),
            kelimeCevirBtn: document.getElementById('kelimeCevirBtn'),
            dinleBulBtn: document.getElementById('dinleBulBtn'),
            boslukDoldurBtn: document.getElementById('boslukDoldurBtn'),
            duaEtBtn: document.getElementById('duaEtBtn'),
            ayetOkuBtn: document.getElementById('ayetOkuBtn'),
            hadisOkuBtn: document.getElementById('hadisOkuBtn'),
            
            // Kelime oyunu
            score: document.getElementById('score'),
            level: document.getElementById('level'),
            correct: document.getElementById('correct'),
            wrong: document.getElementById('wrong'),
            progressBar: document.getElementById('progressBar'),
            sureInfo: document.getElementById('sureInfo'),
            arabicWord: document.getElementById('arabicWord'),
            audioBtn: document.getElementById('audioBtn'),
            hintBtn: document.getElementById('hintBtn'),
            options: document.getElementById('options'),
            feedback: document.getElementById('feedback'),
            nextBtn: document.getElementById('nextBtn'),
            difficulty: document.getElementById('difficulty'),
            modal: document.getElementById('modal'),
            newLevel: document.getElementById('newLevel'),
            modalBtn: document.getElementById('modalBtn'),
            modeSelector: document.getElementById('modeSelector'),
            gameScreen: document.getElementById('gameScreen'),
            settingsBtn: document.getElementById('settingsBtn'),
            startBtn: document.getElementById('startBtn'),
            modeButtons: document.getElementById('modeButtons'),
            difficultyButtons: document.getElementById('difficultyButtons'),
            lives: document.getElementById('lives'),
            livesDisplay: document.getElementById('livesDisplay'),
            timer: document.getElementById('timer'),
            timerDisplay: document.getElementById('timerDisplay'),
            currentMode: document.getElementById('currentMode'),
            gameOverModal: document.getElementById('gameOverModal'),
            gameOverTitle: document.getElementById('gameOverTitle'),
            gameOverText: document.getElementById('gameOverText'),
            finalScore: document.getElementById('finalScore'),
            restartBtn: document.getElementById('restartBtn'),
            backToMenuBtn: document.getElementById('backToMenuBtn'),
            backFromGameBtn: document.getElementById('backFromGameBtn'),
            
            // Ayet modu
            ayetMode: document.getElementById('ayetMode'),
            ayetSureInfo: document.getElementById('ayetSureInfo'),
            ayetArabic: document.getElementById('ayetArabic'),
            ayetTranslation: document.getElementById('ayetTranslation'),
            ayetAudioBtn: document.getElementById('ayetAudioBtn'),
            prevAyetBtn: document.getElementById('prevAyetBtn'),
            nextAyetBtn: document.getElementById('nextAyetBtn'),
            backFromAyetBtn: document.getElementById('backFromAyetBtn'),
            
            // Dua modu
            duaMode: document.getElementById('duaMode'),
            duaSureInfo: document.getElementById('duaSureInfo'),
            duaArabic: document.getElementById('duaArabic'),
            duaTranslation: document.getElementById('duaTranslation'),
            duaAudioBtn: document.getElementById('duaAudioBtn'),
            prevDuaBtn: document.getElementById('prevDuaBtn'),
            nextDuaBtn: document.getElementById('nextDuaBtn'),
            backFromDuaBtn: document.getElementById('backFromDuaBtn'),
            
            // Hadis modu
            hadisMode: document.getElementById('hadisMode'),
            hadisCategory: document.getElementById('hadisCategory'),
            hadisTitle: document.getElementById('hadisTitle'),
            hadisHeader: document.getElementById('hadisHeader'),
            hadisText: document.getElementById('hadisText'),
            hadisRef: document.getElementById('hadisRef'),
            prevHadisBtn: document.getElementById('prevHadisBtn'),
            nextHadisBtn: document.getElementById('nextHadisBtn'),
            backFromHadisBtn: document.getElementById('backFromHadisBtn'),
            
            // BoÅŸluk Doldur modu
            boslukMode: document.getElementById('boslukMode'),
            boslukSureInfo: document.getElementById('boslukSureInfo'),
            boslukAyetText: document.getElementById('boslukAyetText'),
            boslukAudioBtn: document.getElementById('boslukAudioBtn'),
            boslukOptions: document.getElementById('boslukOptions'),
            boslukFeedback: document.getElementById('boslukFeedback'),
            boslukNextBtn: document.getElementById('boslukNextBtn'),
            boslukScore: document.getElementById('boslukScore'),
            boslukCorrect: document.getElementById('boslukCorrect'),
            boslukWrong: document.getElementById('boslukWrong'),
            backFromBoslukBtn: document.getElementById('backFromBoslukBtn'),
            
            // Dinle ve Bul modu
            dinleMode: document.getElementById('dinleMode'),
            dinleSureInfo: document.getElementById('dinleSureInfo'),
            dinleAudioBtn: document.getElementById('dinleAudioBtn'),
            dinleOptions: document.getElementById('dinleOptions'),
            dinleFeedback: document.getElementById('dinleFeedback'),
            dinleNextBtn: document.getElementById('dinleNextBtn'),
            dinleScore: document.getElementById('dinleScore'),
            dinleCorrect: document.getElementById('dinleCorrect'),
            dinleWrong: document.getElementById('dinleWrong'),
            backFromDinleBtn: document.getElementById('backFromDinleBtn')
        };

        // ============ SES Ã‡ALMA FONKSÄ°YONU ============
        function playAudio(audioUrl, button) {
            // EÄŸer ses Ã§alÄ±yorsa durdur
            if (currentAudio && !currentAudio.paused) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
            }
            
            if (!audioUrl) {
                console.error('Ses dosyasÄ± bulunamadÄ±');
                return;
            }
            
            // Butonu devre dÄ±ÅŸÄ± bÄ±rak
            if (button) button.disabled = true;
            
            currentAudio = new Audio(audioUrl);
            
            currentAudio.play().catch(err => {
                console.error('Ses hatasÄ±:', err);
                if (button) button.disabled = false;
            });
            
            // Ses bittiÄŸinde butonu aktif et
            currentAudio.onended = () => {
                if (button) button.disabled = false;
            };
        }

        // ============ VERÄ° YÃœKLEME ============
        async function loadData() {
            try {
                // Kelime verilerini yÃ¼kle (Kelime Ã‡evir ve Dinle ve Bul iÃ§in)
                const kelimeResponse = await fetch('kelimebul.json');
                kelimeBulData = await kelimeResponse.json();
                // console.log(`${kelimeBulData.length} kelime yÃ¼klendi`);
                
                // Ayet verilerini yÃ¼kle (BoÅŸluk Doldur ve Ayet Oku iÃ§in)
                const ayetResponse = await fetch('ayetoku.json');
                ayetOkuData = await ayetResponse.json();
                // console.log(`${ayetOkuData.length} ayet yÃ¼klendi`);
                
                // Dua verilerini yÃ¼kle (Dua Et iÃ§in)
                const duaResponse = await fetch('duaet.json');
                duaData = await duaResponse.json();
                // console.log(`${duaData.length} dua yÃ¼klendi`);
                
                // Hadis verilerini yÃ¼kle (Hadis Oku iÃ§in)
                const hadisResponse = await fetch('hadisoku.json');
                hadisData = await hadisResponse.json();
                // console.log(`${hadisData.length} hadis yÃ¼klendi`);
                
                // Mod seÃ§iciyi baÅŸlat
                initModeSelector();

                // Ana menÃ¼ zorluk butonlarÄ±nÄ± baÅŸlat
                initMainMenuDifficultyButtons();
                
            } catch (error) {
                console.error('Veri yÃ¼kleme hatasÄ±:', error);
                elements.mainMenu.innerHTML = '<p style="color: red; text-align: center;">Veriler yÃ¼klenemedi!</p>';
            }
        }

        // ============ Ä°STATÄ°STÄ°K BAR FONKSÄ°YONLARI ============
        function loadStats() {
            // Local storage'dan puanlarÄ± yÃ¼kle
            totalPoints = parseInt(localStorage.getItem('hasene_totalPoints') || '0');
            starPoints = Math.floor(totalPoints / 500);
            level = calculateLevel(totalPoints);
            
            // Rozet sistemi yÃ¼kle
            const savedBadges = localStorage.getItem('hasene_badges');
            if (savedBadges) {
                badges = JSON.parse(savedBadges);
            }
            
            // Streak sistemi yÃ¼kle
            const savedStreak = localStorage.getItem('hasene_streak');
            if (savedStreak) {
                streakData = { ...streakData, ...JSON.parse(savedStreak) };
            }
            
            // GÃ¼nlÃ¼k gÃ¶revler yÃ¼kle
            const savedTasks = localStorage.getItem('hasene_dailyTasks');
            if (savedTasks) {
                dailyTasks = { ...dailyTasks, ...JSON.parse(savedTasks) };
                // Set nesnelerini yeniden oluÅŸtur
                dailyTasks.todayStats.farklÄ±Zorluk = new Set(dailyTasks.todayStats.farklÄ±Zorluk || []);
            }
            
            // GÃ¼nlÃ¼k kontrol
            checkDailyProgress();
            checkDailyTasks();
        }

        // Daha zorlu seviye hesaplama sistemi
        function calculateLevel(points) {
            if (points < 1000) return 1;        // Level 1: 0-999 puan
            if (points < 2500) return 2;        // Level 2: 1000-2499 puan  
            if (points < 5000) return 3;        // Level 3: 2500-4999 puan
            if (points < 8500) return 4;        // Level 4: 5000-8499 puan
            if (points < 13000) return 5;       // Level 5: 8500-12999 puan
            if (points < 19000) return 6;       // Level 6: 13000-18999 puan
            if (points < 26500) return 7;       // Level 7: 19000-26499 puan
            if (points < 35500) return 8;       // Level 8: 26500-35499 puan
            if (points < 46000) return 9;       // Level 9: 35500-45999 puan
            if (points < 58000) return 10;      // Level 10: 46000-57999 puan
            
            // Level 10'dan sonra her seviye iÃ§in 15000 puan artÄ±ÅŸ
            const afterLevel10 = points - 58000;
            return 10 + Math.floor(afterLevel10 / 15000) + 1;
        }

        // Bir sonraki seviye iÃ§in gereken puan
        function getNextLevelRequiredPoints(currentLevel) {
            const levelThresholds = [0, 1000, 2500, 5000, 8500, 13000, 19000, 26500, 35500, 46000, 58000];
            
            // currentLevel 1-10 arasÄ±ndaysa threshold'u dÃ¶ndÃ¼r
            if (currentLevel >= 1 && currentLevel <= 10) {
                return levelThresholds[currentLevel];
            }
            
            // Level 10'dan sonra - her seviye iÃ§in 15000 puan artÄ±ÅŸ
            if (currentLevel > 10) {
                return 58000 + ((currentLevel - 10) * 15000);
            }
            
            // Level 0 veya geÃ§ersiz deÄŸerler iÃ§in
            return levelThresholds[1]; // Level 1 threshold'u
        }

        function saveStats() {
  
            alert(`ï¿½ KAYDETME:\n\nğŸ’° Puan: ${totalPoints}\nğŸ† Rozet: ${badges.bronze}\nğŸ”¥ Streak: ${streakData.currentStreak}`);
            
            // Local storage'a puanlarÄ± kaydet
            localStorage.setItem('hasene_totalPoints', totalPoints.toString());
            localStorage.setItem('hasene_badges', JSON.stringify(badges));
            localStorage.setItem('hasene_streak', JSON.stringify(streakData));
            
            // Set'i array'e Ã§evir ve kaydet
            const tasksToSave = { 
                ...dailyTasks, 
                todayStats: {
                    ...dailyTasks.todayStats,
                    farklÄ±Zorluk: Array.from(dailyTasks.todayStats.farklÄ±Zorluk)
                }
            };
            localStorage.setItem('hasene_dailyTasks', JSON.stringify(tasksToSave));
        }

        function resetAllStats() {
            // TÃ¼m istatistikleri sÄ±fÄ±rla
            totalPoints = 0;
            starPoints = 0;
            level = 1;
            sessionScore = 0;
            sessionCorrect = 0;
            sessionWrong = 0;
            
            // Rozetleri sÄ±fÄ±rla
            badges = { bronze: 0, silver: 0, gold: 0, diamond: 0 };
            
            // Streak verilerini sÄ±fÄ±rla
            streakData = {
                currentStreak: 0,
                playDates: [],
                dailyGoal: 5,
                dailyCorrect: 0
            };
            
            // Daily tasks sÄ±fÄ±rla
            dailyTasks = {
                lastTaskDate: null,
                tasks: [],
                bonusTasks: [],
                completedTasks: [],
                rewardsClaimed: false,
                todayStats: {
                    kelimeCevir: 0,
                    dinleBul: 0,
                    boslukDoldur: 0,
                    ayetOku: 0,
                    duaOgre: 0,
                    hadisOku: 0,
                    toplamDogru: 0,
                    toplamPuan: 0,
                    perfectStreak: 0,
                    farklÄ±Zorluk: new Set()
                }
            };
            
            // Local Storage'Ä± tamamen temizle
            localStorage.removeItem('hasene_totalPoints');
            localStorage.removeItem('hasene_badges');
            localStorage.removeItem('hasene_streak');
            localStorage.removeItem('hasene_dailyTasks');
            
            // Yeni gÃ¼nlÃ¼k gÃ¶revler oluÅŸtur
            generateDailyTasks(new Date().toISOString().split('T')[0]);
            
            // EkranÄ± gÃ¼ncelle
            updateStatsBar();
            updateUI();
            
            console.log('âœ… TÃ¼m veriler sÄ±fÄ±rlandÄ±! Fresh start hazÄ±r!');
            alert('ğŸ”„ TÃ¼m veriler sÄ±fÄ±rlandÄ±! Oyuna sÄ±fÄ±rdan baÅŸlayabilirsin.');
        }

        function updateStatsBar() {
            // Ãœst bar gÃ¼ncelle
            document.getElementById('gamePoints').textContent = totalPoints;
            
            // YÄ±ldÄ±z puanÄ± gÃ¼ncelle (her 500 puana 1 yÄ±ldÄ±z)
            starPoints = Math.floor(totalPoints / 500);
            document.getElementById('starPoints').textContent = starPoints;
            
            // Rozet sistemini gÃ¼ncelle
            updateBadgeSystem();
            
            // Seviye gÃ¼ncelle (yeni hesaplama sistemi)
            level = calculateLevel(totalPoints);
            document.getElementById('playerLevel').textContent = level;
            
            // Seviye ilerleme Ã§ubuÄŸunu gÃ¼ncelle
            let currentLevelStart, nextLevelStart;
            
            if (level === 1) {
                currentLevelStart = 0;
                nextLevelStart = 1000;
            } else if (level <= 10) {
                const thresholds = [0, 1000, 2500, 5000, 8500, 13000, 19000, 26500, 35500, 46000, 58000];
                currentLevelStart = thresholds[level - 1];
                nextLevelStart = thresholds[level];
            } else {
                // Level 10'dan sonra
                currentLevelStart = 58000 + ((level - 11) * 15000);
                nextLevelStart = 58000 + ((level - 10) * 15000);
            }
            
            const currentLevelPoints = totalPoints - currentLevelStart;
            const levelRequiredPoints = nextLevelStart - currentLevelStart;
            const progressPercentage = Math.max(0, Math.min((currentLevelPoints / levelRequiredPoints) * 100, 100));
            
            const levelProgressElement = document.getElementById('levelProgress');
            if (levelProgressElement) {
                levelProgressElement.style.width = progressPercentage + '%';
            }
            
            // Alt bar (oyun iÃ§i stats) gÃ¼ncelle
            const scoreElement = document.getElementById('score');
            const levelElement = document.getElementById('level');
            if (scoreElement) scoreElement.textContent = totalPoints;
            if (levelElement) levelElement.textContent = level;
            
            // Kaydet
            saveStats();
            
            // Debug iÃ§in mevcut deÄŸerleri logla
            console.log('ğŸ“Š Mevcut Ä°statistikler:', {
                totalPoints: totalPoints,
                starPoints: starPoints, 
                level: level,
                sessionScore: sessionScore,
                sessionCorrect: sessionCorrect,
                sessionWrong: sessionWrong
            });
        }

        // SESSION PUAN FONKSÄ°YONLARI
        function addSessionPoints(points) {
            console.log(`ğŸ’° === addSessionPoints(${points}) Ã‡AÄRILDI ===`);
            console.log(`ğŸ“Š Ã–nce: sessionScore=${sessionScore}, sessionCorrect=${sessionCorrect}`);
            sessionScore += points;
            sessionCorrect++;
            
            // Geriye uyumluluk iÃ§in eski deÄŸiÅŸkenleri de gÃ¼ncelle
            score = sessionScore;
            correct = sessionCorrect;
            console.log(`ğŸ“Š Sonra: sessionScore=${sessionScore}, sessionCorrect=${sessionCorrect}`);
            console.log(`ğŸ¨ updateUI() Ã§aÄŸrÄ±lÄ±yor...`);
            updateUI(); // Sadece oyun iÃ§i barÄ± gÃ¼ncelle
            console.log(`âœ… addSessionPoints tamamlandÄ±!`);
        }

        function addSessionWrong() {
            console.log(`âŒ === addSessionWrong() Ã‡AÄRILDI ===`);
            console.log(`ğŸ“Š Ã–nce: sessionWrong=${sessionWrong}, wrong=${wrong}`);
            sessionWrong++;
            wrong = sessionWrong; // Geriye uyumluluk
            console.log(`ğŸ“Š Sonra: sessionWrong=${sessionWrong}, wrong=${wrong}`);
            console.log(`ğŸ¨ updateUI() Ã§aÄŸrÄ±lÄ±yor...`);
            updateUI();
            console.log(`âœ… addSessionWrong tamamlandÄ±!`);
        }

        // ============ ROZET SÄ°STEMÄ° ============
        function updateBadgeSystem() {
            // Her 5 yÄ±ldÄ±z = 1 bronz rozet
            // Her 5 bronz = 1 gÃ¼mÃ¼ÅŸ rozet  
            // Her 5 gÃ¼mÃ¼ÅŸ = 1 altÄ±n rozet
            // Her 5 altÄ±n = 1 elmas rozet
            
            const totalStars = starPoints;
            const newBronze = Math.floor(totalStars / 5);
            const newSilver = Math.floor(newBronze / 5);
            const newGold = Math.floor(newSilver / 5);
            const newDiamond = Math.floor(newGold / 5);
            
            // Rozet seviye kontrolÃ¼ ve modal gÃ¶sterimi
            if (newDiamond > badges.diamond) {
                badges.diamond = newDiamond;
                showBadgeUpModal('diamond', 'ğŸ’ Elmas');
            } else if (newGold > badges.gold) {
                badges.gold = newGold;
                showBadgeUpModal('gold', 'ğŸ¥‡ AltÄ±n');
            } else if (newSilver > badges.silver) {
                badges.silver = newSilver;
                showBadgeUpModal('silver', 'ğŸ¥ˆ GÃ¼mÃ¼ÅŸ');
            } else if (newBronze > badges.bronze) {
                badges.bronze = newBronze;
                showBadgeUpModal('bronze', 'ğŸ¥‰ Bronz');
            }
            
            // TÃ¼m rozet sayÄ±larÄ±nÄ± gÃ¼ncelle
            badges.bronze = newBronze;
            badges.silver = newSilver;
            badges.gold = newGold;
            badges.diamond = newDiamond;
            
            // En yÃ¼ksek rozeti gÃ¶ster
            updateTopBadgeDisplay();
        }

        function updateTopBadgeDisplay() {
            const topBadgeIcon = document.getElementById('topBadgeIcon');
            const topBadgeCount = document.getElementById('topBadgeCount');
            
            if (badges.diamond > 0) {
                topBadgeIcon.textContent = 'ğŸ’';
                topBadgeCount.textContent = badges.diamond;
            } else if (badges.gold > 0) {
                topBadgeIcon.textContent = 'ğŸ¥‡';
                topBadgeCount.textContent = badges.gold;
            } else if (badges.silver > 0) {
                topBadgeIcon.textContent = 'ğŸ¥ˆ';
                topBadgeCount.textContent = badges.silver;
            } else if (badges.bronze > 0) {
                topBadgeIcon.textContent = 'ğŸ¥‰';
                topBadgeCount.textContent = badges.bronze;
            } else {
                topBadgeIcon.textContent = 'ğŸ¥‰';
                topBadgeCount.textContent = '0';
            }
        }

        function showBadgeUpModal(badgeType, badgeName) {
            // Rozet atlama modalÄ± - ÅŸimdilik alert, sonra dÃ¼zeltiriz
            alert(`ğŸ‰ Tebrikler! ${badgeName} rozeti kazandÄ±nÄ±z!`);
        }

        function showBadgesModal() {
            // TÃ¼m rozet sayÄ±larÄ±nÄ± gÃ¼ncelle
            document.getElementById('diamondBadgeCount').textContent = badges.diamond;
            document.getElementById('goldBadgeCount').textContent = badges.gold;
            document.getElementById('silverBadgeCount').textContent = badges.silver;
            document.getElementById('bronzeBadgeCount').textContent = badges.bronze;
            
            // Ä°lerleme bilgilerini gÃ¼ncelle
            document.getElementById('badgesModalStars').textContent = starPoints;
            document.getElementById('badgesModalLevel').textContent = level;
            document.getElementById('badgesModalPoints').textContent = totalPoints.toLocaleString();
            
            // Modal'Ä± gÃ¶ster
            document.getElementById('badgesModal').style.display = 'flex';
        }

        function closeBadgesModal() {
            document.getElementById('badgesModal').style.display = 'none';
        }

        // ============ TAKVÄ°M SÄ°STEMÄ° ============
        function checkDailyProgress() {
            const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
            
            // EÄŸer bugÃ¼n ilk defa aÃ§Ä±lÄ±yorsa
            if (streakData.todayDate !== today) {
                // Ã–nceki gÃ¼n kontrolÃ¼
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                const yesterdayStr = yesterday.toISOString().split('T')[0];
                
                // Streak kontrolÃ¼
                if (streakData.lastPlayDate === yesterdayStr) {
                    // DÃ¼n oynadÄ±, streak devam ediyor
                    streakData.currentStreak++;
                } else if (streakData.lastPlayDate !== today) {
                    // Streak kÄ±rÄ±ldÄ±
                    streakData.currentStreak = 0;
                }
                
                // BugÃ¼nÃ¼n verilerini sÄ±fÄ±rla
                streakData.todayDate = today;
                streakData.todayProgress = 0;
            }
        }

        function updateDailyProgress(correctAnswers) {
            const today = new Date().toISOString().split('T')[0];
            
            // GÃ¼nlÃ¼k ilerleme gÃ¼ncelle
            streakData.todayProgress += correctAnswers;
            
            // GÃ¼nlÃ¼k hedef tamamlandÄ± mÄ±?
            if (streakData.todayProgress >= streakData.dailyGoal && streakData.lastPlayDate !== today) {
                // Ä°lk defa bugÃ¼n hedefi tamamladÄ±
                streakData.lastPlayDate = today;
                streakData.totalPlayDays++;
                
                // Oyun tarihi listesine ekle
                if (!streakData.playDates.includes(today)) {
                    streakData.playDates.push(today);
                    streakData.playDates.sort();
                }
                
                // Streak gÃ¼ncelle
                streakData.currentStreak = Math.max(streakData.currentStreak, 1);
                if (streakData.currentStreak > streakData.bestStreak) {
                    streakData.bestStreak = streakData.currentStreak;
                }
                
                // Veriyi kaydet
                saveStats();
                
                // EÄŸer takvim aÃ§Ä±ksa otomatik yenile (mavi -> yeÅŸil)
                const calendarModal = document.getElementById('calendarModal');
                if (calendarModal && calendarModal.style.display === 'flex') {
                    generateCalendar();
                }
            }
        }

        function showCalendarModal() {
            // Streak bilgilerini gÃ¼ncelle
            document.getElementById('currentStreak').textContent = streakData.currentStreak;
            document.getElementById('totalPlayDays').textContent = streakData.totalPlayDays;
            document.getElementById('bestStreak').textContent = streakData.bestStreak;
            document.getElementById('todayProgress').textContent = Math.min(streakData.todayProgress, streakData.dailyGoal);
            
            // Takvimi oluÅŸtur
            generateCalendar();
            
            // Modal'Ä± gÃ¶ster
            document.getElementById('calendarModal').style.display = 'flex';
        }

        function closeCalendarModal() {
            document.getElementById('calendarModal').style.display = 'none';
        }

        function generateCalendar() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth();
            const todayDate = today.getDate();
            
            // Ay adÄ±nÄ± gÃ¼ncelle
            const monthNames = [
                'Ocak', 'Åubat', 'Mart', 'Nisan', 'MayÄ±s', 'Haziran',
                'Temmuz', 'AÄŸustos', 'EylÃ¼l', 'Ekim', 'KasÄ±m', 'AralÄ±k'
            ];
            document.getElementById('calendarMonth').textContent = `${monthNames[month]} ${year}`;
            
            // Takvim grid'ini temizle ve yeni HTML oluÅŸtur (Ã§ok daha hÄ±zlÄ±)
            const grid = document.getElementById('calendarGrid');
            
            // HTML string olarak oluÅŸtur (DOM manipulation'dan Ã§ok daha hÄ±zlÄ±)
            let html = '';
            
            // HaftanÄ±n gÃ¼nlerini ekle (daha kÄ±sa isimler + kÃ¼Ã§Ã¼k font)
            const dayNames = ['Pz', 'Pt', 'Sl', 'Ã‡r', 'Pr', 'Cm', 'Ct'];
            dayNames.forEach(day => {
                html += `<div style="font-weight: 600; font-size: 0.65em; color: #666; padding: 3px;">${day}</div>`;
            });
            
            // AyÄ±n ilk gÃ¼nÃ¼nÃ¼n haftanÄ±n hangi gÃ¼nÃ¼ olduÄŸunu bul
            const firstDay = new Date(year, month, 1);
            const startingDayOfWeek = (firstDay.getDay() + 6) % 7; // Pazartesi = 0
            
            // BoÅŸ gÃ¼nler ekle
            for (let i = 0; i < startingDayOfWeek; i++) {
                html += '<div></div>';
            }
            
            // playDates array'ini Set'e Ã§evir (Ã§ok daha hÄ±zlÄ± arama)
            const playDatesSet = new Set(streakData.playDates);
            
            // AyÄ±n gÃ¼nlerini ekle
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                let style = 'padding: 6px 3px; border-radius: 50%; cursor: pointer; font-size: 0.75em; min-height: 28px; display: flex; align-items: center; justify-content: center;';
                
                // BugÃ¼n ise vurgula
                if (day === todayDate) {
                    style += ' background: #2196f3; color: white; font-weight: bold;';
                }
                // Oyun oynandÄ±ysa yeÅŸil
                else if (playDatesSet.has(dateStr)) {
                    style += ' background: #4caf50; color: white;';
                }
                // GeÃ§miÅŸ gÃ¼nlerse gri
                else if (day < todayDate) {
                    style += ' color: #ccc;';
                }
                
                html += `<div style="${style}">${day}</div>`;
            }
            
            // Tek seferde HTML'i set et (Ã§ok hÄ±zlÄ±)
            grid.innerHTML = html;
        }

        // Global fonksiyonlar (window'a ekle ki HTML onclick Ã§alÄ±ÅŸsÄ±n)
        window.showCalendarModal = showCalendarModal;
        window.closeCalendarModal = closeCalendarModal;

        // ============ GÃœNLÄ°K GÃ–REVLER SÄ°STEMÄ° ============
        function checkDailyTasks() {
            const today = new Date().toISOString().split('T')[0];
            
            // EÄŸer yeni gÃ¼n baÅŸladÄ±ysa gÃ¶revleri yenile
            if (dailyTasks.lastTaskDate !== today) {
                generateDailyTasks(today);
            }
        }

        function generateDailyTasks(date) {
            // Temel gÃ¶revler listesi
            const baseTasks = [
                { id: 'kelime5', name: '5 kelime Ã§evir', target: 5, current: 0, type: 'kelimeCevir', reward: 1 },
                { id: 'ayet3', name: '3 ayet oku', target: 3, current: 0, type: 'ayetOku', reward: 1 },
                { id: 'dua2', name: '2 dua Ã¶ÄŸren', target: 2, current: 0, type: 'duaOgre', reward: 1 },
                { id: 'dogru10', name: '10 doÄŸru cevap ver', target: 10, current: 0, type: 'toplamDogru', reward: 1 },
                { id: 'puan100', name: '100 puan topla', target: 100, current: 0, type: 'toplamPuan', reward: 1 }
            ];

            // Bonus gÃ¶revler listesi
            const bonusTasksList = [
                { id: 'perfect5', name: 'HiÃ§ yanlÄ±ÅŸ yapmadan 5 soru Ã§Ã¶z', target: 5, current: 0, type: 'perfectStreak', reward: 2 },
                { id: 'allDiff', name: '3 farklÄ± zorlukta oyna', target: 3, current: 0, type: 'farklÄ±Zorluk', reward: 2 },
                { id: 'hadis1', name: '1 hadis dinle', target: 1, current: 0, type: 'hadisOku', reward: 2 },
                { id: 'dinle3', name: '3 kelime dinle', target: 3, current: 0, type: 'dinleBul', reward: 2 },
                { id: 'bosluk2', name: '2 boÅŸluk doldur', target: 2, current: 0, type: 'boslukDoldur', reward: 2 }
            ];

            // Rastgele 2 bonus gÃ¶rev seÃ§
            const selectedBonus = bonusTasksList.sort(() => 0.5 - Math.random()).slice(0, 2);

            dailyTasks.lastTaskDate = date;
            dailyTasks.tasks = baseTasks;
            dailyTasks.bonusTasks = selectedBonus;
            dailyTasks.completedTasks = [];
            dailyTasks.rewardsClaimed = false;
            dailyTasks.todayStats = {
                kelimeCevir: 0,
                dinleBul: 0,
                boslukDoldur: 0,
                ayetOku: 0,
                duaOgre: 0,
                hadisOku: 0,
                toplamDogru: 0,
                toplamPuan: 0,
                perfectStreak: 0,
                farklÄ±Zorluk: new Set()
            };

            saveStats();
        }

        function updateTaskProgress(gameType, amount = 1) {
            // Oyun tipine gÃ¶re istatistiÄŸi gÃ¼ncelle
            if (dailyTasks.todayStats[gameType] !== undefined) {
                dailyTasks.todayStats[gameType] += amount;
            }

            // Zorluk takibi
            if (currentDifficulty) {
                dailyTasks.todayStats.farklÄ±Zorluk.add(currentDifficulty);
            }

            // GÃ¶revleri kontrol et ve gÃ¼ncelle
            const allTasks = [...dailyTasks.tasks, ...dailyTasks.bonusTasks];
            
            allTasks.forEach(task => {
                if (task.type === gameType) {
                    task.current = Math.min(task.target, dailyTasks.todayStats[gameType]);
                } else if (task.type === 'farklÄ±Zorluk') {
                    task.current = dailyTasks.todayStats.farklÄ±Zorluk.size;
                }

                // GÃ¶rev tamamlandÄ± mÄ±?
                if (task.current >= task.target && !dailyTasks.completedTasks.includes(task.id)) {
                    dailyTasks.completedTasks.push(task.id);
                }
            });

            saveStats();
        }

        function showDailyTasksModal() {
            // GÃ¼nlÃ¼k gÃ¶revleri kontrol et ve gÃ¼ncelle
            checkDailyTasks();
            
            // Debug: GÃ¶rev durumunu logla
            console.log('ğŸ“‹ Daily Tasks Debug:', {
                tasks: dailyTasks.tasks.length,
                bonusTasks: dailyTasks.bonusTasks.length,
                completed: dailyTasks.completedTasks.length,
                lastDate: dailyTasks.lastTaskDate,
                today: new Date().toISOString().split('T')[0]
            });
            
            // GÃ¶rev verilerini gÃ¼ncelle
            updateTasksDisplay();
            
            // Modal'Ä± gÃ¶ster
            document.getElementById('dailyTasksModal').style.display = 'flex';
        }

        function closeDailyTasksModal() {
            document.getElementById('dailyTasksModal').style.display = 'none';
        }

        function updateTasksDisplay() {
            // GÃ¼venlik kontrolÃ¼: EÄŸer gÃ¶revler boÅŸsa, yeniden oluÅŸtur
            if (!dailyTasks.tasks || dailyTasks.tasks.length === 0) {
                console.log('âš ï¸ Tasks boÅŸ, yeniden oluÅŸturuluyor...');
                generateDailyTasks(new Date().toISOString().split('T')[0]);
            }
            
            const completedCount = dailyTasks.completedTasks.length;
            const totalCount = dailyTasks.tasks.length + dailyTasks.bonusTasks.length;
            
            console.log('ğŸ“Š updateTasksDisplay:', { completedCount, totalCount });
            
            // Genel ilerleme
            document.getElementById('completedTasks').textContent = completedCount;
            document.getElementById('totalTasks').textContent = totalCount;
            
            const progressPercent = (completedCount / totalCount) * 100;
            document.getElementById('taskProgress').style.width = progressPercent + '%';

            // Temel gÃ¶revleri gÃ¶ster
            const dailyList = document.getElementById('dailyTasksList');
            dailyList.innerHTML = '';
            
            dailyTasks.tasks.forEach(task => {
                const taskElement = createTaskElement(task);
                dailyList.appendChild(taskElement);
            });

            // Bonus gÃ¶revleri gÃ¶ster
            const bonusList = document.getElementById('bonusTasksList');
            bonusList.innerHTML = '';
            
            dailyTasks.bonusTasks.forEach(task => {
                const taskElement = createTaskElement(task);
                bonusList.appendChild(taskElement);
            });

            // Ã–dÃ¼l bÃ¶lÃ¼mÃ¼
            const rewardsSection = document.getElementById('rewardsSection');
            if (completedCount === totalCount && !dailyTasks.rewardsClaimed) {
                rewardsSection.style.display = 'block';
            } else {
                rewardsSection.style.display = 'none';
            }
        }

        function createTaskElement(task) {
            const isCompleted = dailyTasks.completedTasks.includes(task.id);
            const progressPercent = (task.current / task.target) * 100;
            
            const div = document.createElement('div');
            div.style.cssText = `
                padding: 10px; 
                border: 2px solid ${isCompleted ? '#4caf50' : '#e0e0e0'}; 
                border-radius: 6px; 
                margin: 6px 0;
                background: ${isCompleted ? '#f1f8e9' : 'white'};
            `;
            
            div.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                    <span style="font-weight: 600; font-size: 0.85em; color: ${isCompleted ? '#2e7d2e' : '#333'};">
                        ${isCompleted ? 'âœ…' : 'â³'} ${getTaskDisplayName(task)}
                    </span>
                    <span style="font-size: 0.75em; color: #666;">+${task.reward} â­</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="flex: 1; background: #f0f0f0; border-radius: 8px; height: 5px; margin-right: 8px;">
                        <div style="background: ${isCompleted ? '#4caf50' : '#2196f3'}; height: 100%; border-radius: 8px; width: ${progressPercent}%; transition: width 0.3s;"></div>
                    </div>
                    <span style="font-size: 0.7em; color: #666; font-weight: 500;">${task.current}/${task.target}</span>
                </div>
            `;
            
            return div;
        }

        function getTaskDisplayName(task) {
            // GÃ¶rev tipine gÃ¶re uygun isim dÃ¶ndÃ¼r
            const taskNames = {
                'kelime5': 'Kelime Ã‡evir',
                'ayet3': 'Ayet Oku', 
                'dua2': 'Dua Ã–ÄŸren',
                'dogru10': 'DoÄŸru Cevaplar',
                'puan100': 'Puan Topla',
                'perfect5': 'MÃ¼kemmel Seri',
                'allDiff': 'FarklÄ± Zorluklar',
                'hadis1': 'Hadis Dinle',
                'dinle3': 'Dinle & Bul',
                'bosluk2': 'BoÅŸluk Doldur'
            };
            
            return taskNames[task.id] || task.name;
        }

        function claimDailyRewards() {
            const completedCount = dailyTasks.completedTasks.length;
            const totalCount = dailyTasks.tasks.length + dailyTasks.bonusTasks.length;
            
            if (completedCount === totalCount && !dailyTasks.rewardsClaimed) {
                // 5 yÄ±ldÄ±z bonus ver
                const bonusPoints = 5 * 500; // 5 yÄ±ldÄ±z = 2500 puan
                totalPoints += bonusPoints;
                
                dailyTasks.rewardsClaimed = true;
                saveStats();
                updateStatsBar();
                
                // Ã–dÃ¼l modalÄ± gÃ¶ster
                alert('ğŸ‰ Tebrikler! 5 yÄ±ldÄ±z bonus kazandÄ±n!');
                
                updateTasksDisplay();
            }
        }

        // Ã–dÃ¼l butonu event listener
        document.addEventListener('DOMContentLoaded', () => {
            const claimBtn = document.getElementById('claimRewardsBtn');
            if (claimBtn) {
                claimBtn.addEventListener('click', claimDailyRewards);
            }
        });

        // Global fonksiyonlar
        window.showDailyTasksModal = showDailyTasksModal;
        window.closeDailyTasksModal = closeDailyTasksModal;
        window.claimDailyRewards = claimDailyRewards;

        // GLOBAL PUAN FONKSÄ°YONU (Oyun bitince Ã§aÄŸrÄ±lÄ±r)
        function addToGlobalPoints(points, correctAnswers = 0) {
            const oldLevel = calculateLevel(totalPoints);
            totalPoints += points;
            const newLevel = calculateLevel(totalPoints);
            
            // Seviye atlama kontrolÃ¼
            if (newLevel > oldLevel) {
                level = newLevel;
                showLevelUpModal(newLevel);
            }
            
            // GÃ¼nlÃ¼k ilerlemeyi gÃ¼ncelle
            if (correctAnswers > 0) {
                updateDailyProgress(correctAnswers);
                
                // GÃ¼nlÃ¼k gÃ¶revleri gÃ¼ncelle
                updateTaskProgress('toplamDogru', correctAnswers);
                updateTaskProgress('toplamPuan', points);
            }
            
            updateStatsBar(); // Global barÄ± gÃ¼ncelle
        }

        // ============ ANA MENÃœ ZORLUK BUTONLARI ============
        function initMainMenuDifficultyButtons() {
            // console.log('ğŸ”§ initMainMenuDifficultyButtons Ã§aÄŸrÄ±ldÄ±');
            
            document.getElementById('mainDiffKolay').onclick = () => {
                console.log('ğŸ¯ Zorluk seÃ§ildi: KOLAY');
                currentDifficulty = 'kolay';
                // Kolay yeÅŸil seÃ§ili, diÄŸerleri kendi border renkleri ile beyaz
                document.getElementById('mainDiffKolay').style.cssText = 'flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: #4CAF50; color: white; border: 2px solid #4CAF50;';
                document.getElementById('mainDiffOrta').style.cssText = 'flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: white; color: #FF9800; border: 2px solid #FF9800;';
                document.getElementById('mainDiffZor').style.cssText = 'flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: white; color: #f44336; border: 2px solid #f44336;';
                // Active class'larÄ± gÃ¼ncelle
                document.querySelectorAll('#mainMenu .diff-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById('mainDiffKolay').classList.add('active');
            };
            
            document.getElementById('mainDiffOrta').onclick = () => {
                console.log('ğŸ¯ Zorluk seÃ§ildi: ORTA');
                currentDifficulty = 'orta';
                // Orta turuncu seÃ§ili, diÄŸerleri kendi border renkleri ile beyaz
                document.getElementById('mainDiffKolay').style.cssText = 'flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: white; color: #4CAF50; border: 2px solid #4CAF50;';
                document.getElementById('mainDiffOrta').style.cssText = 'flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: #FF9800; color: white; border: 2px solid #FF9800;';
                document.getElementById('mainDiffZor').style.cssText = 'flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: white; color: #f44336; border: 2px solid #f44336;';
                // Active class'larÄ± gÃ¼ncelle
                document.querySelectorAll('#mainMenu .diff-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById('mainDiffOrta').classList.add('active');
            };
            
            document.getElementById('mainDiffZor').onclick = () => {
                console.log('ğŸ¯ Zorluk seÃ§ildi: ZOR');
                currentDifficulty = 'zor';
                // Zor kÄ±rmÄ±zÄ± seÃ§ili, diÄŸerleri kendi border renkleri ile beyaz
                document.getElementById('mainDiffKolay').style.cssText = 'flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: white; color: #4CAF50; border: 2px solid #4CAF50;';
                document.getElementById('mainDiffOrta').style.cssText = 'flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: white; color: #FF9800; border: 2px solid #FF9800;';
                document.getElementById('mainDiffZor').style.cssText = 'flex: 1; min-width: 90px; max-width: 120px; margin: 0; padding: 10px; font-size: 0.85em; background: #f44336; color: white; border: 2px solid #f44336;';
                // Active class'larÄ± gÃ¼ncelle
                document.querySelectorAll('#mainMenu .diff-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById('mainDiffZor').classList.add('active');
            };
        }

        // ============ ANA MENÃœ NAVÄ°GASYONU ============
        // Kelime Ã‡evir modu - oyun modlarÄ± seÃ§ici ile baÅŸlar
        elements.kelimeCevirBtn.onclick = () => {
            console.log('ğŸ“š === KELÄ°ME Ã‡EVÄ°R OYUNU BAÅLATILIYOR ===');
            console.log('ğŸ“‹ 1. Veri kontrol ediliyor...');
            
            if (kelimeBulData.length === 0) {
                console.log('âŒ Kelime verileri yÃ¼klenemedi!');
                alert('Kelime verileri yÃ¼klenemedi!');
                return;
            }
            console.log(`âœ… Kelime verileri OK: ${kelimeBulData.length} kelime mevcut`);
            console.log(`ğŸ¯ Mevcut zorluk: ${currentDifficulty}`);
            
            console.log('ğŸ“‹ 2. Mode Selector aÃ§Ä±lÄ±yor...');
            elements.mainMenu.style.display = 'none';
            elements.modeSelector.style.display = 'block';
            elements.settingsBtn.style.display = 'block';
            console.log('âœ… Mode Selector aÃ§Ä±ldÄ±!');
        };

        // Dinle ve Bul modu - DoÄŸrudan baÅŸlat
        elements.dinleBulBtn.onclick = () => {
            console.log('ğŸ”¥ === DINLE VE BUL OYUNU BAÅLATILIYOR ===');
            console.log('ğŸ“‹ 1. Veri kontrol ediliyor...');
            
            if (kelimeBulData.length === 0) {
                console.log('âŒ Kelime verileri yÃ¼klenemedi!');
                alert('Kelime verileri yÃ¼klenemedi!');
                return;
            }
            console.log(`âœ… Kelime verileri OK: ${kelimeBulData.length} kelime mevcut`);
            
            console.log('ğŸ“‹ 2. Zorluk seviyesi kontrol ediliyor...');
            console.log(`ğŸ¯ Mevcut zorluk: ${currentDifficulty}`);
            console.log(`ğŸ¯ Zorluk config:`, CONFIG.difficultyLevels[currentDifficulty]);
            
            console.log('ğŸ“‹ 3. UI deÄŸiÅŸtiriliyor...');
            elements.mainMenu.style.display = 'none';
            elements.dinleMode.style.display = 'block';
            console.log('âœ… UI deÄŸiÅŸikliÄŸi tamamlandÄ±');
            
            console.log('ğŸ“‹ 4. Oyun deÄŸiÅŸkenleri sÄ±fÄ±rlanÄ±yor...');
            console.log(`ğŸ”„ Ã–nceki deÄŸerler: score=${dinleScore}, correct=${dinleCorrect}, wrong=${dinleWrong}, questionCount=${dinleQuestionCount}`);
            // Dinle modunu baÅŸlat
            dinleScore = 0;
            dinleCorrect = 0;
            dinleWrong = 0;
            dinleQuestionCount = 0;
            console.log(`âœ… Yeni deÄŸerler: score=${dinleScore}, correct=${dinleCorrect}, wrong=${dinleWrong}, questionCount=${dinleQuestionCount}`);
            console.log(`ğŸ“Š Session deÄŸerler: sessionScore=${sessionScore}, sessionCorrect=${sessionCorrect}, sessionWrong=${sessionWrong}`);
            
            updateDinleUI();
            loadDinleQuestion();
        };

        // BoÅŸluk Doldur modu
        elements.boslukDoldurBtn.onclick = () => {
            console.log('ğŸ“‹ === BOÅLUK DOLDUR OYUNU BAÅLATILIYOR ===');
            console.log('ğŸ“‹ 1. Veri kontrol ediliyor...');
            
            if (ayetOkuData.length === 0) {
                console.log('âŒ Ayet verileri yÃ¼klenemedi!');
                alert('Ayet verileri yÃ¼klenemedi!');
                return;
            }
            console.log(`âœ… Ayet verileri OK: ${ayetOkuData.length} ayet mevcut`);
            console.log(`ğŸ¯ Mevcut zorluk: ${currentDifficulty}`);
            
            console.log('ğŸ“‹ 2. UI deÄŸiÅŸtiriliyor...');
            elements.mainMenu.style.display = 'none';
            elements.boslukMode.style.display = 'block';
            console.log('âœ… UI deÄŸiÅŸikliÄŸi tamamlandÄ±');
            
            console.log('ğŸ“‹ 3. Oyun deÄŸiÅŸkenleri sÄ±fÄ±rlanÄ±yor...');
            console.log(`ğŸ”„ Ã–nceki deÄŸerler: score=${boslukScore}, correct=${boslukCorrect}, wrong=${boslukWrong}`);
            // BoÅŸluk modunu baÅŸlat
            boslukScore = 0;
            boslukCorrect = 0;
            boslukWrong = 0;
            console.log(`âœ… Yeni deÄŸerler: score=${boslukScore}, correct=${boslukCorrect}, wrong=${boslukWrong}`);
            console.log(`ğŸ“Š Session deÄŸerler: sessionScore=${sessionScore}, sessionCorrect=${sessionCorrect}, sessionWrong=${sessionWrong}`);
            
            updateBoslukUI();
            loadBoslukQuestion();
        };

        // Dua Et modu
        elements.duaEtBtn.onclick = () => {
            if (duaData.length === 0) {
                alert('Dua verileri yÃ¼klenemedi!');
                return;
            }
            elements.mainMenu.style.display = 'none';
            elements.duaMode.style.display = 'block';
            // Rastgele dua ile baÅŸla
            currentDuaIndex = Math.floor(Math.random() * duaData.length);
            showDua();
        };

        // Ayet Oku modu
        elements.ayetOkuBtn.onclick = () => {
            if (ayetOkuData.length === 0) {
                alert('Ayet verileri yÃ¼klenemedi!');
                return;
            }
            elements.mainMenu.style.display = 'none';
            elements.ayetMode.style.display = 'block';
            // Rastgele ayet ile baÅŸla
            currentAyetIndex = Math.floor(Math.random() * ayetOkuData.length);
            showAyet();
        };

        // Hadis Oku modu
        elements.hadisOkuBtn.onclick = () => {
            if (hadisData.length === 0) {
                alert('Hadis verileri yÃ¼klenemedi!');
                return;
            }
            elements.mainMenu.style.display = 'none';
            elements.hadisMode.style.display = 'block';
            // Rastgele hadis ile baÅŸla
            currentHadisIndex = Math.floor(Math.random() * hadisData.length);
            showHadis();
        };

        // Geri butonlarÄ±
        elements.backToMenuBtn.onclick = () => {
            elements.modeSelector.style.display = 'none';
            elements.mainMenu.style.display = 'block';
            elements.settingsBtn.style.display = 'none';
        };

        elements.backFromGameBtn.onclick = () => {
            stopTimer();
            elements.gameScreen.style.display = 'none';
            elements.modeSelector.style.display = 'none';
            elements.mainMenu.removeAttribute('style');
            elements.mainMenu.style.display = 'block';
            elements.settingsBtn.style.display = 'none';
        };

        elements.backFromAyetBtn.onclick = () => {
            elements.ayetMode.style.display = 'none';
            elements.modeSelector.style.display = 'none';
            elements.gameScreen.style.display = 'none';
            elements.mainMenu.removeAttribute('style');
            elements.mainMenu.style.display = 'block';
            elements.settingsBtn.style.display = 'none';
        };

        elements.backFromDuaBtn.onclick = () => {
            elements.duaMode.style.display = 'none';
            elements.modeSelector.style.display = 'none';
            elements.gameScreen.style.display = 'none';
            elements.mainMenu.removeAttribute('style');
            elements.mainMenu.style.display = 'block';
            elements.settingsBtn.style.display = 'none';
        };

        elements.backFromHadisBtn.onclick = () => {
            elements.hadisMode.style.display = 'none';
            elements.modeSelector.style.display = 'none';
            elements.gameScreen.style.display = 'none';
            elements.mainMenu.removeAttribute('style');
            elements.mainMenu.style.display = 'block';
            elements.settingsBtn.style.display = 'none';
        };

        elements.backFromBoslukBtn.onclick = () => {
            elements.boslukMode.style.display = 'none';
            elements.modeSelector.style.display = 'none';
            elements.gameScreen.style.display = 'none';
            elements.mainMenu.removeAttribute('style');
            elements.mainMenu.style.display = 'block';
            elements.settingsBtn.style.display = 'none';
        };

        elements.backFromDinleBtn.onclick = () => {
            elements.dinleMode.style.display = 'none';
            elements.modeSelector.style.display = 'none';
            elements.gameScreen.style.display = 'none';
            elements.mainMenu.removeAttribute('style');
            elements.mainMenu.style.display = 'block';
            elements.settingsBtn.style.display = 'none';
        };

        // ============ MOD SEÃ‡Ä°CÄ°YÄ° BAÅLAT (Sadece Kelime Ã‡evir iÃ§in) ============
        function initModeSelector() {
            // Sadece Kelime Ã‡evir oyun modlarÄ±nÄ± oluÅŸtur
            Object.keys(CONFIG.gameModes).forEach(modeKey => {
                const mode = CONFIG.gameModes[modeKey];
                const btn = document.createElement('button');
                btn.className = 'mode-btn';
                if (modeKey === currentMode) btn.classList.add('active');
                btn.innerHTML = `<strong>${mode.name}</strong><small>${mode.description}</small>`;
                btn.onclick = () => selectMode(modeKey);
                elements.modeButtons.appendChild(btn);
            });
        }

        // ============ MOD SEÃ‡ ============
        function selectMode(modeKey) {
            currentMode = modeKey;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.closest('.mode-btn').classList.add('active');
        }

        // ============ OYUNU BAÅLAT ============
        elements.startBtn.onclick = () => {
            const mode = CONFIG.gameModes[currentMode];
            
            // AyarlarÄ± uygula
            lives = mode.lives;
            if (lives > 0) {
                elements.livesDisplay.style.display = 'block';
                elements.lives.textContent = lives;
            } else {
                elements.livesDisplay.style.display = 'none';
            }

            if (mode.timeLimit > 0) {
                elements.timerDisplay.style.display = 'block';
            } else {
                elements.timerDisplay.style.display = 'none';
            }

            if (mode.showHint) {
                elements.hintBtn.style.display = 'block';
            } else {
                elements.hintBtn.style.display = 'none';
            }

            elements.currentMode.textContent = mode.name;

            // Session puanlarÄ±nÄ± sÄ±fÄ±rla (global puanlarÄ± koru)
            sessionScore = 0;
            sessionCorrect = 0;
            sessionWrong = 0;
            questionCount = 0;
            
            // Geriye uyumluluk iÃ§in eski deÄŸiÅŸkenleri de sÄ±fÄ±rla
            score = 0;
            correct = 0;
            wrong = 0;

            updateUI();

            // EkranlarÄ± deÄŸiÅŸtir - Sadece Kelime Ã‡evir oyunu baÅŸlat
            elements.modeSelector.style.display = 'none';
            elements.gameScreen.style.display = 'block';
            loadQuestion();
        };

        // ============ AYARLARA DÃ–N ============
        if (elements.settingsBtn) {
            elements.settingsBtn.onclick = () => {
                stopTimer();
                elements.gameScreen.style.display = 'none';
                elements.modeSelector.style.display = 'block';
            };
        }

        // ============ AYET GÃ–STER ============
        // ============ SORU YÃœKLEME (Kelime Ã‡evir) ============
        function loadQuestion() {
            console.log('ğŸ“š === KELÄ°ME Ã‡EVÄ°R SORU YÃœKLENÄ°YOR ===');
            console.log(`ğŸ“Š Mevcut soru sayÄ±sÄ±: ${questionCount}`);
            console.log(`ğŸ¯ Mevcut mod: ${currentMode}`);
            console.log(`ğŸ¯ Zorluk: ${currentDifficulty}`);
            
            const mode = CONFIG.gameModes[currentMode];
            console.log(`ğŸ“‹ Mod detaylarÄ±:`, mode);
            
            // Soru sayÄ±sÄ± kontrolÃ¼ - oyun bitirme
            if (questionCount >= mode.questionsPerLevel) {
                console.log(`ğŸ === KELÄ°ME Ã‡EVÄ°R OYUNU BÄ°TTÄ° ===`);
                console.log(`âœ… ${mode.questionsPerLevel} soru tamamlandÄ±!`);
                console.log(`ğŸ“Š Final session score: ${sessionScore}`);
                
                // GÃ¼nlÃ¼k gÃ¶rev ilerlemesini gÃ¼ncelle
                updateTaskProgress('kelimeCevir', sessionCorrect);
                
                // Session puanlarÄ±nÄ± global'e aktar
                console.log(`ğŸ’° Session puanlarÄ± global'e aktarÄ±lÄ±yor: ${sessionScore} puan`);
                addToGlobalPoints(sessionScore, sessionCorrect);
                
                // Direkt ana menÃ¼ye dÃ¶n (popup yok)
                console.log(`ğŸ”„ Ana menÃ¼ye dÃ¶nÃ¼lÃ¼yor...`);
                elements.gameScreen.style.display = 'none';
                elements.modeSelector.style.display = 'none';
                elements.mainMenu.style.display = 'block';
                console.log(`âœ… Kelime Ã‡evir oyunu bitti ve ana menÃ¼ye dÃ¶nÃ¼ldÃ¼!`);
                return;
            }

            // Can kontrolÃ¼
            if (mode.lives > 0 && lives <= 0) {
                console.log(`ğŸ’€ Can bitti! Oyun sona eriyor...`);
                gameOver('Can bitti!');
                return;
            }

            console.log(`ğŸ” Zorluk filtreleme baÅŸlÄ±yor...`);
            console.log(`ğŸ¯ SeÃ§ili zorluk: ${currentDifficulty}`);
            
            // Zorluk filtreleme
            const diffLevel = CONFIG.difficultyLevels[currentDifficulty];
            console.log(`ğŸ“‹ Zorluk aralÄ±ÄŸÄ±: ${diffLevel.minDiff}-${diffLevel.maxDiff}`);
            console.log(`ğŸ“¦ Toplam kelime sayÄ±sÄ±: ${kelimeBulData.length}`);
            
            let filteredData = kelimeBulData.filter(w => 
                w.difficulty >= diffLevel.minDiff && w.difficulty <= diffLevel.maxDiff
            );
            console.log(`âœ… Zorluk filtresi sonrasÄ±: ${filteredData.length} kelime`);

            // Mod Ã¶zel zorluk kontrolÃ¼
            if (mode.minDifficulty) {
                console.log(`ğŸ“‹ Mod minimum zorluk kontrolÃ¼: >= ${mode.minDifficulty}`);
                filteredData = filteredData.filter(w => w.difficulty >= mode.minDifficulty);
                console.log(`âœ… Mod filtresi sonrasÄ±: ${filteredData.length} kelime`);
            }

            if (filteredData.length === 0) {
                filteredData = kelimeBulData;
            }

            // Rastgele kelime seÃ§
            currentQuestion = filteredData[Math.floor(Math.random() * filteredData.length)];

            // UI gÃ¼ncelle
            elements.arabicWord.textContent = currentQuestion.kelime;
            elements.sureInfo.textContent = `${currentQuestion.sure_adi} Suresi`;

            // SeÃ§enekler oluÅŸtur
            const wrongAnswers = getWrongAnswers(3);
            const allOptions = [
                { text: currentQuestion.anlam, correct: true },
                ...wrongAnswers.map(w => ({ text: w.anlam, correct: false }))
            ];

            // KarÄ±ÅŸtÄ±r
            shuffle(allOptions);

            // SeÃ§enekleri gÃ¶ster
            elements.options.innerHTML = '';
            const labels = ['A', 'B', 'C', 'D'];
            allOptions.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option';
                btn.textContent = `${labels[i]}) ${opt.text}`;
                btn.onclick = () => checkAnswer(btn, opt.correct);
                elements.options.appendChild(btn);
            });

            // SÄ±fÄ±rla
            elements.feedback.textContent = '';
            elements.feedback.className = 'feedback';
            elements.nextBtn.style.display = 'none';
            elements.hintBtn.disabled = false;

            // Ä°lerleme gÃ¼ncelle
            updateProgress();

            // SÃ¼reyi baÅŸlat
            if (mode.timeLimit > 0) {
                startTimer(mode.timeLimit);
            }
        }

        // ============ YANLIÅ CEVAPLAR ============
        function getWrongAnswers(count) {
            const wrong = [];
            const filtered = kelimeBulData.filter(w => w.id !== currentQuestion.id);
            
            while (wrong.length < count && filtered.length > 0) {
                const idx = Math.floor(Math.random() * filtered.length);
                const word = filtered[idx];
                
                if (!wrong.find(w => w.anlam === word.anlam)) {
                    wrong.push(word);
                }
                filtered.splice(idx, 1);
            }
            
            return wrong;
        }

        // ============ KARIÅTIR ============
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // ============ CEVAP KONTROL ============
        function checkAnswer(button, isCorrect) {
            console.log(`ğŸš¨ === KELÄ°ME Ã‡EVÄ°R CEVAP KONTROLÃœ ===`);
            console.log(`ğŸ‘† TÄ±klanan buton: "${button.textContent}"`);
            console.log(`âœ…/âŒ isCorrect parametresi: ${isCorrect}`);
            console.log(`ğŸ“Š Mevcut soru: #${questionCount + 1}`);
            console.log(`ğŸ“Š Ã–nce - session: score=${sessionScore}, correct=${sessionCorrect}, wrong=${sessionWrong}`);
            console.log(`ğŸ“Š Ã–nce - kelime Ã§evir: score=${score}, correct=${correct}, wrong=${wrong}`);
            
            stopTimer();
            
            // TÃ¼m butonlarÄ± kapat
            const allBtns = document.querySelectorAll('.option');
            console.log(`ğŸ”’ ${allBtns.length} buton devre dÄ±ÅŸÄ± bÄ±rakÄ±lÄ±yor...`);
            allBtns.forEach(btn => btn.disabled = true);

            const mode = CONFIG.gameModes[currentMode];
            const diffLevel = CONFIG.difficultyLevels[currentDifficulty];
            console.log(`ğŸ¯ Mod: ${currentMode}, Zorluk: ${currentDifficulty}`);

            if (isCorrect) {
                console.log(`âœ… === DOÄRU CEVAP Ä°ÅLEMÄ° ===`);
                button.classList.add('correct');
                elements.feedback.textContent = 'âœ… DoÄŸru!';
                elements.feedback.className = 'feedback correct';
                
                const points = currentQuestion.difficulty * diffLevel.pointsMultiplier;
                console.log(`ğŸ’° Puan hesaplama: ${currentQuestion.difficulty} Ã— ${diffLevel.pointsMultiplier} = ${points} puan`);
                console.log(`ğŸ“Š addSessionPoints(${points}) Ã§aÄŸrÄ±lÄ±yor...`);
                addSessionPoints(points); // Session puanÄ±na ekle
                
                // Daily task progress - her doÄŸru cevap iÃ§in
                updateTaskProgress('kelimeCevir', 1);
                console.log(`âœ… DoÄŸru cevap iÅŸlemi tamamlandÄ±!`);
                
                updateUI();
            } else {
                console.log(`âŒ === YANLIÅ CEVAP Ä°ÅLEMÄ° ===`);
                button.classList.add('wrong');
                elements.feedback.textContent = `âŒ YanlÄ±ÅŸ! DoÄŸru: ${currentQuestion.anlam}`;
                elements.feedback.className = 'feedback wrong';
                
                console.log(`ğŸ“Š addSessionWrong() Ã§aÄŸrÄ±lÄ±yor...`);
                addSessionWrong(); // Session yanlÄ±ÅŸ sayÄ±sÄ±nÄ± artÄ±r
                
                console.log(`ğŸ’¸ Puan cezasÄ± uygulanÄ±yor: ${CONFIG.wrongAnswerPenalty} puan`);
                console.log(`ğŸ“Š Eski score: ${score}`);
                // Puan cezasÄ±
                score = Math.max(0, score - CONFIG.wrongAnswerPenalty);
                console.log(`ğŸ“Š Yeni score: ${score}`);
                
                // Can kaybÄ±
                if (mode.lives > 0) {
                    console.log(`ğŸ’€ Can kaybÄ±: ${lives} - 1 = ${lives - 1}`);
                    lives--;
                    elements.lives.textContent = lives;
                    
                    if (lives <= 0) {
                        setTimeout(() => gameOver('CanlarÄ±nÄ±z bitti!'), 1500);
                    }
                }

                updateUI();

                // DoÄŸru cevabÄ± gÃ¶ster
                allBtns.forEach(btn => {
                    if (btn.textContent.includes(currentQuestion.anlam)) {
                        btn.classList.add('correct');
                    }
                });
            }

            questionCount++;
            elements.nextBtn.style.display = 'block';
        }

        // ============ SES Ã‡ALMA ============
        elements.audioBtn.onclick = () => {
            if (currentQuestion && currentQuestion.ses_dosyasi) {
                playAudio(currentQuestion.ses_dosyasi, elements.audioBtn);
            }
        };

        // ============ SONRAKÄ° SORU ============
        elements.nextBtn.onclick = () => {
            loadQuestion();
        };

        // ============ Ä°LERLEME GÃœNCELLE ============
        function updateProgress() {
            const mode = CONFIG.gameModes[currentMode];
            const progress = (questionCount / mode.questionsPerLevel) * 100;
            elements.progressBar.style.width = `${progress}%`;
        }

        // ============ UI GÃœNCELLE ============
        function updateUI() {
            // Alt bar: Sadece session (oyun iÃ§i) puanlarÄ± gÃ¶ster
            elements.score.textContent = sessionScore;
            elements.correct.textContent = sessionCorrect;
            elements.wrong.textContent = sessionWrong;
            elements.level.textContent = level; // Global seviye
        }

        // ============ SÃœRE YÃ–NETÄ°MÄ° ============
        function startTimer(seconds) {
            stopTimer();
            timeLeft = seconds;
            elements.timer.textContent = timeLeft;
            
            timer = setInterval(() => {
                timeLeft--;
                elements.timer.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    stopTimer();
                    gameOver('SÃ¼re doldu!');
                }
            }, 1000);
        }

        function stopTimer() {
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
        }

        // ============ Ä°PUCU ============
        elements.hintBtn.onclick = () => {
            // Bir yanlÄ±ÅŸ cevabÄ± kaldÄ±r
            const allBtns = document.querySelectorAll('.option');
            const wrongBtns = Array.from(allBtns).filter(btn => 
                !btn.textContent.includes(currentQuestion.anlam) && !btn.disabled
            );
            
            if (wrongBtns.length > 0) {
                const randomWrong = wrongBtns[Math.floor(Math.random() * wrongBtns.length)];
                randomWrong.style.opacity = '0.3';
                randomWrong.disabled = true;
                
                // Ä°pucu puan cezasÄ±
                score = Math.max(0, score - 10);
                updateUI();
                
                elements.hintBtn.disabled = true;
            }
        };

        // ============ SEVÄ°YE ATLAMA ============
        function showLevelUpModal(newLevel) {
            elements.newLevel.textContent = newLevel;
            
            // Modal iÃ§in ek bilgileri gÃ¼ncelle
            const modalTotalPoints = document.getElementById('modalTotalPoints');
            const modalNextLevelPoints = document.getElementById('modalNextLevelPoints');
            
            if (modalTotalPoints && modalNextLevelPoints) {
                modalTotalPoints.textContent = totalPoints.toLocaleString();
                modalNextLevelPoints.textContent = getNextLevelRequiredPoints(newLevel).toLocaleString();
            }
            
            elements.modal.style.display = 'flex';
        }

        // Eski levelUp fonksiyonu artÄ±k kullanÄ±lmÄ±yor
        function levelUp() {
            // Bu fonksiyon artÄ±k kullanÄ±lmÄ±yor - yeni puan bazlÄ± sistem kullanÄ±yoruz
        }

        // ============ OYUN BÄ°TTÄ° ============
        function gameOver(reason) {
            stopTimer();
            
            // Session puanlarÄ±nÄ± global'e aktar
            addToGlobalPoints(sessionScore, sessionCorrect);
            
            elements.gameOverTitle.textContent = 'ğŸ˜¢ Oyun Bitti';
            elements.gameOverText.textContent = reason;
            elements.finalScore.textContent = `Bu Oyun: ${sessionScore} puan\nToplam: ${totalPoints} puan`;
            elements.gameOverModal.style.display = 'block';
        }

        // ============ YENÄ°DEN BAÅLAT ============
        elements.restartBtn.onclick = () => {
            elements.gameOverModal.style.display = 'none';
            elements.gameScreen.style.display = 'none';
            elements.modeSelector.style.display = 'none';
            elements.mainMenu.style.display = 'block';
            elements.settingsBtn.style.display = 'none';
        };

        // ============ MODAL KAPAT ============
        elements.modalBtn.onclick = () => {
            elements.modal.style.display = 'none';
            // Sadece modal'Ä± kapat - seviye yÃ¼kselme bilgilendirmesi iÃ§in gereksiz iÅŸlem yapma
        };

        // ============ DÄ°NLE VE BUL MODU ============
        let currentDinleQuestion = null;
        let dinleQuestionCount = 0;
        const DINLE_MAX_QUESTIONS = 10;

        function loadDinleQuestion() {
            console.log(`ğŸª === SORU YÃœKLENÄ°YOR ===`);
            console.log(`ğŸ“Š Mevcut soru sayÄ±sÄ±: ${dinleQuestionCount}/${DINLE_MAX_QUESTIONS}`);
            console.log(`ğŸ“Š Oyun durumu: score=${dinleScore}, correct=${dinleCorrect}, wrong=${dinleWrong}`);
            
            // 10 soru kontrolÃ¼
            if (dinleQuestionCount >= DINLE_MAX_QUESTIONS) {
                console.log(`ğŸ === OYUN BÄ°TÄ°ÅÄ° TETÄ°KLENDÄ° ===`);
                console.log(`âœ… ${DINLE_MAX_QUESTIONS} soru tamamlandÄ±!`);
                console.log(`ğŸ“Š Final oyun skorlarÄ±: dinleScore=${dinleScore}, dinleCorrect=${dinleCorrect}, dinleWrong=${dinleWrong}`);
                console.log(`ğŸ“Š Final session skorlarÄ±: sessionScore=${sessionScore}, sessionCorrect=${sessionCorrect}, sessionWrong=${sessionWrong}`);
                
                // GÃ¼nlÃ¼k gÃ¶rev ilerlemesini gÃ¼ncelle
                updateTaskProgress('dinleBul', sessionCorrect);
                
                console.log(`ğŸ’° Session puanlarÄ± global'e aktarÄ±lÄ±yor: ${sessionScore} puan`);
                // Session puanlarÄ±nÄ± global'e aktar
                addToGlobalPoints(sessionScore, sessionCorrect);
                
                console.log(`ğŸ”„ Ana menÃ¼ye dÃ¶nÃ¼lÃ¼yor...`);
                // Direkt ana menÃ¼ye dÃ¶n
                elements.dinleMode.style.display = 'none';
                elements.mainMenu.style.display = 'block';
                
                console.log(`ğŸ§¹ Oyun deÄŸiÅŸkenleri temizleniyor...`);
                // SÄ±fÄ±rla
                dinleScore = 0;
                dinleCorrect = 0;
                dinleWrong = 0;
                dinleQuestionCount = 0;
                updateDinleUI();
                console.log(`âœ… Oyun bitti ve ana menÃ¼ye dÃ¶nÃ¼ldÃ¼!`);
                return;
            }

            console.log(`ğŸ” Zorluk filtreleme baÅŸlÄ±yor...`);
            console.log(`ğŸ¯ SeÃ§ili zorluk: ${currentDifficulty}`);
            // Zorluk filtreleme (Kelime Ã‡evir ile aynÄ±)
            const diffLevel = CONFIG.difficultyLevels[currentDifficulty];
            console.log(`ğŸ“‹ Zorluk aralÄ±ÄŸÄ±: ${diffLevel.minDiff}-${diffLevel.maxDiff}`);
            console.log(`ğŸ“¦ Toplam kelime sayÄ±sÄ±: ${kelimeBulData.length}`);
            
            let filteredData = kelimeBulData.filter(w => 
                w.difficulty >= diffLevel.minDiff && w.difficulty <= diffLevel.maxDiff
            );
            console.log(`âœ… FiltrelenmiÅŸ kelime sayÄ±sÄ±: ${filteredData.length}`);

            if (filteredData.length === 0) {
                console.log(`âš ï¸ FiltrelenmiÅŸ veri boÅŸ! TÃ¼m kelimeler kullanÄ±lacak.`);
                filteredData = kelimeBulData;
            }

            console.log(`ğŸ² Rastgele kelime seÃ§iliyor...`);
            const randomIndex = Math.floor(Math.random() * filteredData.length);
            currentDinleQuestion = filteredData[randomIndex];
            console.log(`âœ… SeÃ§ilen index: ${randomIndex}/${filteredData.length}`);
            
            console.log(`ğŸ“ === SORU #${dinleQuestionCount + 1} ===`);
            console.log(`ğŸ”¤ Kelime: "${currentDinleQuestion.kelime}"`);
            console.log(`ğŸ’­ Anlam: "${currentDinleQuestion.anlam}"`);
            console.log(`ğŸ“Š Soru zorluÄŸu: ${currentDinleQuestion.difficulty}`);
            console.log(`ğŸ“Š SeÃ§ili zorluk: ${currentDifficulty} (${diffLevel.minDiff}-${diffLevel.maxDiff})`);
            console.log(`ğŸ¯ Puan hesaplama: ${currentDinleQuestion.difficulty} Ã— 2 = ${currentDinleQuestion.difficulty * 2} puan`);

            console.log(`ğŸ¨ UI gÃ¼ncelleniyor...`);
            // UI gÃ¼ncelle
            elements.dinleSureInfo.textContent = `${currentDinleQuestion.sure_adi} Suresi`;
            console.log(`âœ… Sure bilgisi: ${currentDinleQuestion.sure_adi} Suresi`);

            console.log(`ğŸ”€ SeÃ§enekler oluÅŸturuluyor... (4 ArapÃ§a kelime)`);
            // SeÃ§enekler oluÅŸtur (4 ArapÃ§a kelime) - aynÄ± zorluktan
            const wrongAnswers = [];
            let attempts = 0;
            while (wrongAnswers.length < 3 && attempts < 50) {
                attempts++;
                const random = filteredData[Math.floor(Math.random() * filteredData.length)];
                if (random.kelime !== currentDinleQuestion.kelime && 
                    !wrongAnswers.find(w => w.kelime === random.kelime)) {
                    wrongAnswers.push(random);
                    console.log(`âœ… YanlÄ±ÅŸ cevap #${wrongAnswers.length}: "${random.kelime}" (zorluk: ${random.difficulty})`);
                }
            }
            console.log(`ğŸ“Š YanlÄ±ÅŸ cevap oluÅŸturma: ${attempts} deneme, ${wrongAnswers.length}/3 baÅŸarÄ±lÄ±`);

            const allOptions = [
                { text: currentDinleQuestion.kelime, correct: true },
                ...wrongAnswers.map(w => ({ text: w.kelime, correct: false }))
            ];
            console.log(`ğŸ¯ DoÄŸru cevap: "${currentDinleQuestion.kelime}" (index: 0)`);
            console.log(`âŒ YanlÄ±ÅŸ cevaplar: ${wrongAnswers.map(w => `"${w.kelime}"`).join(', ')}`);

            shuffle(allOptions);

            // SeÃ§enekleri gÃ¶ster
            elements.dinleOptions.innerHTML = '';
            const labels = ['A', 'B', 'C', 'D'];
            allOptions.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option';
                btn.textContent = `${labels[i]}) ${opt.text}`;
                btn.onclick = () => checkDinleAnswer(btn, opt.correct);
                elements.dinleOptions.appendChild(btn);
            });

            elements.dinleFeedback.textContent = '';
            elements.dinleFeedback.className = 'feedback';
            elements.dinleNextBtn.style.display = 'none';

            // Otomatik ses Ã§al
            if (currentDinleQuestion.ses_dosyasi) {
                playAudio(currentDinleQuestion.ses_dosyasi, elements.dinleAudioBtn);
            }
        }

        elements.dinleAudioBtn.onclick = () => {
            if (currentDinleQuestion && currentDinleQuestion.ses_dosyasi) {
                playAudio(currentDinleQuestion.ses_dosyasi, elements.dinleAudioBtn);
            }
        };

        function checkDinleAnswer(button, isCorrect) {
            console.log(`ğŸš¨ === CEVAP KONTROLÃœ BAÅLIYOR ===`);
            console.log(`ğŸ‘† TÄ±klanan buton: "${button.textContent}"`);
            console.log(`âœ…/âŒ isCorrect parametresi: ${isCorrect}`);
            console.log(`ğŸ“Š Mevcut soru: #${dinleQuestionCount + 1}/${DINLE_MAX_QUESTIONS}`);
            console.log(`ï¿½ Ã–nce - session score: ${sessionScore}, session correct: ${sessionCorrect}, session wrong: ${sessionWrong}`);
            console.log(`ğŸ“Š Ã–nce - dinle score: ${dinleScore}, dinle correct: ${dinleCorrect}, dinle wrong: ${dinleWrong}`);
            
            const allBtns = elements.dinleOptions.querySelectorAll('.option');
            console.log(`ğŸ”’ ${allBtns.length} buton devre dÄ±ÅŸÄ± bÄ±rakÄ±lÄ±yor...`);
            allBtns.forEach(btn => btn.disabled = true);

            if (isCorrect) {
                console.log(`âœ… === DOÄRU CEVAP Ä°ÅLEMÄ° ===`);
                button.classList.add('correct');
                elements.dinleFeedback.textContent = 'âœ… DoÄŸru!';
                elements.dinleFeedback.className = 'feedback correct';
                
                const points = currentDinleQuestion.difficulty * 2;
                console.log(`ğŸ’° Puan hesaplama: ${currentDinleQuestion.difficulty} Ã— 2 = ${points} puan`);
                
                console.log(`ğŸ“Š Dinle score gÃ¼ncelleniyor: ${dinleScore} + ${points} = ${dinleScore + points}`);
                dinleScore += points; // Local oyun puanÄ±
                
                console.log(`ğŸ“Š Dinle correct gÃ¼ncelleniyor: ${dinleCorrect} + 1 = ${dinleCorrect + 1}`);
                dinleCorrect++;
                
                console.log(`ğŸ“Š addSessionPoints(${points}) Ã§aÄŸrÄ±lÄ±yor...`);
                addSessionPoints(points); // Session puanÄ±na ekle
                
                // Daily task progress - her doÄŸru cevap iÃ§in
                updateTaskProgress('dinleBul', 1);
                console.log(`âœ… DoÄŸru cevap iÅŸlemi tamamlandÄ±!`);
                console.log(`ğŸ“Š Sonra - session score: ${sessionScore}, session correct: ${sessionCorrect}`);
            } else {
                console.log(`âŒ === YANLIÅ CEVAP Ä°ÅLEMÄ° ===`);
                button.classList.add('wrong');
                elements.dinleFeedback.textContent = `âŒ YanlÄ±ÅŸ! DoÄŸru: ${currentDinleQuestion.kelime} (${currentDinleQuestion.anlam})`;
                elements.dinleFeedback.className = 'feedback wrong';
                
                console.log(`ğŸ“Š Dinle wrong gÃ¼ncelleniyor: ${dinleWrong} + 1 = ${dinleWrong + 1}`);
                dinleWrong++;
                
                console.log(`ğŸ“Š addSessionWrong() Ã§aÄŸrÄ±lÄ±yor...`);
                addSessionWrong(); // Session yanlÄ±ÅŸ sayÄ±sÄ±nÄ± artÄ±r
                console.log(`âŒ Ã–NEMLI: YanlÄ±ÅŸ cevap iÃ§in puan EKLENMEDÄ°!`);
                console.log(`ğŸ“Š Session score deÄŸiÅŸmedi: ${sessionScore}`);

                console.log(`ğŸ” DoÄŸru cevabÄ± gÃ¶steriliyor...`);
                // DoÄŸru cevabÄ± gÃ¶ster
                let correctButtonFound = false;
                allBtns.forEach(btn => {
                    if (btn.textContent.includes(currentDinleQuestion.kelime)) {
                        btn.classList.add('correct');
                        correctButtonFound = true;
                        console.log(`âœ… DoÄŸru buton bulundu ve iÅŸaretlendi: "${btn.textContent}"`);
                    }
                });
                if (!correctButtonFound) {
                    console.log(`âš ï¸ DoÄŸru buton bulunamadÄ±!`);
                }
            }

            console.log(`ğŸ“Š Soru sayacÄ± artÄ±rÄ±lÄ±yor: ${dinleQuestionCount} + 1 = ${dinleQuestionCount + 1}`);
            dinleQuestionCount++; // Soru sayacÄ±nÄ± artÄ±r
            console.log(`ğŸ“Š FINAL - session: score=${sessionScore}, correct=${sessionCorrect}, wrong=${sessionWrong}`);
            console.log(`ğŸ“Š FINAL - dinle: score=${dinleScore}, correct=${dinleCorrect}, wrong=${dinleWrong}, questionCount=${dinleQuestionCount}`);
            console.log(`ğŸš¨ === CEVAP KONTROLÃœ BÄ°TTÄ° ===`);
            console.log(`ğŸ¨ UI gÃ¼ncelleniyor ve Next butonu gÃ¶steriliyor...`);
            updateDinleUI();
            elements.dinleNextBtn.style.display = 'block';
            console.log(`âœ… Cevap iÅŸlemi tamamen tamamlandÄ±!`);
        }

        elements.dinleNextBtn.onclick = () => {
            console.log(`ğŸ”„ Next butonu tÄ±klandÄ±! Yeni soru yÃ¼kleniyor...`);
            console.log(`ğŸ“Š Bir sonraki soru: #${dinleQuestionCount + 1}/${DINLE_MAX_QUESTIONS}`);
            elements.dinleNextBtn.style.display = 'none';
            loadDinleQuestion();
        };

        function updateDinleUI() {
            console.log(`ğŸ¨ DinleUI gÃ¼ncelleniyor...`);
            console.log(`ğŸ“Š GÃ¶sterilecek deÄŸerler: score=${dinleScore}, correct=${dinleCorrect}, wrong=${dinleWrong}`);
            elements.dinleScore.textContent = dinleScore;
            elements.dinleCorrect.textContent = dinleCorrect;
            elements.dinleWrong.textContent = dinleWrong;
            console.log(`âœ… DinleUI gÃ¼ncellendi!`);
        }

        // ============ BOÅLUK DOLDUR MODU ============
        let currentBoslukQuestion = null;
        let missingWord = '';
        let missingIndex = -1;
        let boslukQuestionCount = 0;
        const BOSLUK_MAX_QUESTIONS = 10;

        function loadBoslukQuestion() {
            console.log('ğŸ“‹ === BOÅLUK DOLDUR SORU YÃœKLENÄ°YOR ===');
            console.log(`ğŸ“Š Mevcut soru sayÄ±sÄ±: ${boslukQuestionCount}/${BOSLUK_MAX_QUESTIONS}`);
            console.log(`ğŸ“Š Oyun durumu: score=${boslukScore}, correct=${boslukCorrect}, wrong=${boslukWrong}`);
            
            // 10 soru kontrolÃ¼
            if (boslukQuestionCount >= BOSLUK_MAX_QUESTIONS) {
                console.log(`ğŸ === BOÅLUK DOLDUR OYUNU BÄ°TTÄ° ===`);
                console.log(`âœ… ${BOSLUK_MAX_QUESTIONS} soru tamamlandÄ±!`);
                console.log(`ğŸ“Š Final oyun skorlarÄ±: boslukScore=${boslukScore}, boslukCorrect=${boslukCorrect}, boslukWrong=${boslukWrong}`);
                console.log(`ğŸ“Š Final session skorlarÄ±: sessionScore=${sessionScore}, sessionCorrect=${sessionCorrect}, sessionWrong=${sessionWrong}`);
                
                // GÃ¼nlÃ¼k gÃ¶rev ilerlemesini gÃ¼ncelle
                updateTaskProgress('boslukDoldur', sessionCorrect);
                
                console.log(`ğŸ’° Session puanlarÄ± global'e aktarÄ±lÄ±yor: ${sessionScore} puan`);
                // Session puanlarÄ±nÄ± global'e aktar
                addToGlobalPoints(sessionScore, sessionCorrect);
                
                console.log(`ğŸ”„ Ana menÃ¼ye dÃ¶nÃ¼lÃ¼yor...`);
                // Direkt ana menÃ¼ye dÃ¶n
                elements.boslukMode.style.display = 'none';
                elements.mainMenu.style.display = 'block';
                
                console.log(`ğŸ§¹ Oyun deÄŸiÅŸkenleri temizleniyor...`);
                // SÄ±fÄ±rla
                boslukScore = 0;
                boslukCorrect = 0;
                boslukWrong = 0;
                boslukQuestionCount = 0;
                updateBoslukUI();
                console.log(`âœ… BoÅŸluk Doldur oyunu bitti ve ana menÃ¼ye dÃ¶nÃ¼ldÃ¼!`);
                return;
            }

            console.log(`ğŸ” Ayet filtreleme baÅŸlÄ±yor...`);
            // Rastgele ayet seÃ§ (ayet_metni olan ayetleri filtrele)
            const validAyets = ayetOkuData.filter(a => a.ayet_metni && a.ayet_metni.trim());
            console.log(`ğŸ“¦ Toplam ayet sayÄ±sÄ±: ${ayetOkuData.length}`);
            console.log(`âœ… GeÃ§erli ayet sayÄ±sÄ±: ${validAyets.length}`);
            
            if (validAyets.length === 0) {
                console.error('âŒ GeÃ§erli ayet bulunamadÄ±!');
                return;
            }
            
            console.log(`ğŸ² Rastgele ayet seÃ§iliyor...`);
            const randomIndex = Math.floor(Math.random() * validAyets.length);
            const ayet = validAyets[randomIndex];
            console.log(`âœ… SeÃ§ilen ayet index: ${randomIndex}/${validAyets.length}`);
            
            console.log(`ğŸ“ === SORU #${boslukQuestionCount + 1} ===`);
            console.log(`ğŸ“– Sure: ${ayet.sure_adi || 'Bilinmiyor'}`);
            console.log(`ğŸ”¢ Ayet No: ${ayet.ayet_no || 'Bilinmiyor'}`);
            console.log(`ğŸ“ Ayet Metni: "${ayet.ayet_metni}"`);
            
            // Ayet metnini kelimelere bÃ¶l
            const words = ayet.ayet_metni.split(' ').filter(w => w && w.trim());
            console.log(`ğŸ”¤ Kelime sayÄ±sÄ±: ${words.length}`);
            console.log(`ğŸ”¤ Kelimeler:`, words);
            
            if (words.length < 4) {
                // Ã‡ok kÄ±sa ayetler iÃ§in tekrar dene
                loadBoslukQuestion();
                return;
            }

            // Rastgele bir kelimeyi gizle
            missingIndex = Math.floor(Math.random() * words.length);
            missingWord = words[missingIndex];

            // BoÅŸluk ile deÄŸiÅŸtir
            const displayText = words.map((w, i) => i === missingIndex ? '______' : w).join(' ');

            currentBoslukQuestion = ayet;

            // UI gÃ¼ncelle
            elements.boslukSureInfo.textContent = `${ayet.sure_adÄ± || 'SÃ»re'} - Ayet`;
            elements.boslukAyetText.textContent = displayText;

            // SeÃ§enekler oluÅŸtur (boÅŸluÄŸa gelecek kelime)
            const wrongWords = [];
            let attempts = 0;
            while (wrongWords.length < 3 && attempts < 100) {
                attempts++;
                const randomAyet = validAyets[Math.floor(Math.random() * validAyets.length)];
                if (!randomAyet.ayet_metni) continue;
                
                const randomWords = randomAyet.ayet_metni.split(' ').filter(w => w && w.trim());
                if (randomWords.length === 0) continue;
                
                const randomWord = randomWords[Math.floor(Math.random() * randomWords.length)];
                if (randomWord && randomWord !== missingWord && !wrongWords.includes(randomWord)) {
                    wrongWords.push(randomWord);
                }
            }
            
            // EÄŸer yeterli yanlÄ±ÅŸ cevap bulunamadÄ±ysa, eksik olanlarÄ± doldur
            while (wrongWords.length < 3) {
                wrongWords.push('...');
            }

            const allOptions = [
                { text: missingWord, correct: true },
                ...wrongWords.map(w => ({ text: w, correct: false }))
            ];

            shuffle(allOptions);

            // SeÃ§enekleri gÃ¶ster
            elements.boslukOptions.innerHTML = '';
            const labels = ['A', 'B', 'C', 'D'];
            allOptions.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option';
                btn.textContent = `${labels[i]}) ${opt.text}`;
                btn.onclick = () => checkBoslukAnswer(btn, opt.correct);
                elements.boslukOptions.appendChild(btn);
            });

            elements.boslukFeedback.textContent = '';
            elements.boslukFeedback.className = 'feedback';
            elements.boslukNextBtn.style.display = 'none';
        }

        elements.boslukAudioBtn.onclick = () => {
            if (currentBoslukQuestion && currentBoslukQuestion.ayet_ses_dosyasi) {
                playAudio(currentBoslukQuestion.ayet_ses_dosyasi, elements.boslukAudioBtn);
            }
        };

        function checkBoslukAnswer(button, isCorrect) {
            console.log(`ğŸš¨ === BOÅLUK DOLDUR CEVAP KONTROLÃœ ===`);
            console.log(`ğŸ‘† TÄ±klanan buton: "${button.textContent}"`);
            console.log(`âœ…/âŒ isCorrect parametresi: ${isCorrect}`);
            console.log(`ğŸ“Š Mevcut soru: #${boslukQuestionCount + 1}/${BOSLUK_MAX_QUESTIONS}`);
            console.log(`ğŸ“Š Eksik kelime: "${missingWord}"`);
            console.log(`ğŸ“Š Ã–nce - session: score=${sessionScore}, correct=${sessionCorrect}, wrong=${sessionWrong}`);
            console.log(`ğŸ“Š Ã–nce - boÅŸluk: score=${boslukScore}, correct=${boslukCorrect}, wrong=${boslukWrong}`);
            
            const allBtns = elements.boslukOptions.querySelectorAll('.option');
            console.log(`ğŸ”’ ${allBtns.length} buton devre dÄ±ÅŸÄ± bÄ±rakÄ±lÄ±yor...`);
            allBtns.forEach(btn => btn.disabled = true);

            if (isCorrect) {
                console.log(`âœ… === DOÄRU CEVAP Ä°ÅLEMÄ° ===`);
                button.classList.add('correct');
                elements.boslukFeedback.textContent = 'âœ… DoÄŸru!';
                elements.boslukFeedback.className = 'feedback correct';
                
                console.log(`ğŸ’° BoÅŸluk Doldur sabit puan: 10 puan ekleniyor`);
                console.log(`ğŸ“Š BoÅŸluk score gÃ¼ncelleniyor: ${boslukScore} + 10 = ${boslukScore + 10}`);
                boslukScore += 10; // Local oyun puanÄ±
                boslukCorrect++;
                
                console.log(`ğŸ“Š addSessionPoints(10) Ã§aÄŸrÄ±lÄ±yor...`);
                addSessionPoints(10); // Session puanÄ±na ekle
                
                // Daily task progress - her doÄŸru cevap iÃ§in
                updateTaskProgress('boslukDoldur', 1);
                console.log(`âœ… DoÄŸru cevap iÅŸlemi tamamlandÄ±!`);

                // Tam ayeti gÃ¶ster
                elements.boslukAyetText.textContent = currentBoslukQuestion.ayet_metni;
            } else {
                console.log(`âŒ === YANLIÅ CEVAP Ä°ÅLEMÄ° ===`);
                button.classList.add('wrong');
                elements.boslukFeedback.textContent = `âŒ YanlÄ±ÅŸ! DoÄŸru kelime: ${missingWord}`;
                elements.boslukFeedback.className = 'feedback wrong';
                
                console.log(`ğŸ“Š BoÅŸluk wrong gÃ¼ncelleniyor: ${boslukWrong} + 1 = ${boslukWrong + 1}`);
                boslukWrong++;
                
                console.log(`ğŸ“Š addSessionWrong() Ã§aÄŸrÄ±lÄ±yor...`);
                addSessionWrong(); // Session yanlÄ±ÅŸ sayÄ±sÄ±nÄ± artÄ±r
                console.log(`âŒ Ã–NEMLI: YanlÄ±ÅŸ cevap iÃ§in puan EKLENMEDÄ°!`);

                console.log(`ğŸ” DoÄŸru cevabÄ± gÃ¶steriliyor...`);
                // DoÄŸru cevabÄ± gÃ¶ster
                let correctButtonFound = false;
                allBtns.forEach(btn => {
                    if (btn.textContent.includes(missingWord)) {
                        btn.classList.add('correct');
                        correctButtonFound = true;
                        console.log(`âœ… DoÄŸru buton bulundu: "${btn.textContent}"`);
                    }
                });
                if (!correctButtonFound) {
                    console.log(`âš ï¸ DoÄŸru buton bulunamadÄ±! Aranan: "${missingWord}"`);
                }

                // Tam ayeti gÃ¶ster
                elements.boslukAyetText.textContent = currentBoslukQuestion.ayet_metni;
            }

            console.log(`ğŸ“Š Soru sayacÄ± artÄ±rÄ±lÄ±yor: ${boslukQuestionCount} + 1 = ${boslukQuestionCount + 1}`);
            boslukQuestionCount++; // Soru sayacÄ±nÄ± artÄ±r
            console.log(`ğŸ“Š FINAL - session: score=${sessionScore}, correct=${sessionCorrect}, wrong=${sessionWrong}`);
            console.log(`ğŸ“Š FINAL - boÅŸluk: score=${boslukScore}, correct=${boslukCorrect}, wrong=${boslukWrong}, questionCount=${boslukQuestionCount}`);
            console.log(`ğŸš¨ === BOÅLUK DOLDUR CEVAP KONTROLÃœ BÄ°TTÄ° ===`);
            updateBoslukUI();
            elements.boslukNextBtn.style.display = 'block';
        }

        elements.boslukNextBtn.onclick = () => {
            loadBoslukQuestion();
        };

        function updateBoslukUI() {
            console.log(`ğŸ¨ BoslukUI gÃ¼ncelleniyor...`);
            console.log(`ğŸ“Š GÃ¶sterilecek deÄŸerler: score=${boslukScore}, correct=${boslukCorrect}, wrong=${boslukWrong}`);
            elements.boslukScore.textContent = boslukScore;
            elements.boslukCorrect.textContent = boslukCorrect;
            elements.boslukWrong.textContent = boslukWrong;
            console.log(`âœ… BoslukUI gÃ¼ncellendi!`);
        }

        // ============ DUA ET MODU ============
        function showDua() {
            const dua = duaData[currentDuaIndex];
            if (!dua) return;

            elements.duaSureInfo.textContent = `Ayet: ${dua.ayet || ''}`;
            elements.duaArabic.textContent = dua.dua || '';
            elements.duaTranslation.textContent = dua.tercume || '';

            elements.prevDuaBtn.disabled = currentDuaIndex === 0;
            elements.nextDuaBtn.disabled = currentDuaIndex === duaData.length - 1;
        }

        elements.prevDuaBtn.onclick = () => {
            if (currentDuaIndex > 0) {
                currentDuaIndex--;
                showDua();
                // Navigasyon - gÃ¶rev sayÄ±lmaz
            }
        };

        elements.nextDuaBtn.onclick = () => {
            if (currentDuaIndex < duaData.length - 1) {
                currentDuaIndex++;
                showDua();
                // Navigasyon - gÃ¶rev sayÄ±lmaz
            }
        };

        elements.duaAudioBtn.onclick = () => {
            const dua = duaData[currentDuaIndex];
            if (dua && dua.ses_url) {
                // Ses baÅŸlangÄ±Ã§ zamanÄ± iÃ§in Ã¶zel iÅŸlem
                if (currentAudio && !currentAudio.paused) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                }
                
                elements.duaAudioBtn.disabled = true;
                currentAudio = new Audio(dua.ses_url);
                
                if (dua.start) {
                    currentAudio.currentTime = dua.start;
                }
                
                currentAudio.play().catch(err => {
                    console.error('Ses hatasÄ±:', err);
                    elements.duaAudioBtn.disabled = false;
                });
                
                currentAudio.onended = () => {
                    elements.duaAudioBtn.disabled = false;
                    // Daily task progress - SONUNA KADAR dinledi!
                    updateTaskProgress('duaOgre', 1);
                };
            }
        };

        // ============ AYET OKU MODU (RASTGELE) ============
        function showAyet() {
            // Rastgele ayet seÃ§
            currentAyetIndex = Math.floor(Math.random() * ayetOkuData.length);
            const ayet = ayetOkuData[currentAyetIndex];
            if (!ayet) return;
            
            elements.ayetSureInfo.textContent = `${ayet.sure_adÄ± || 'SÃ»re'} - Ayet`;
            elements.ayetArabic.textContent = ayet.ayet_metni || '';
            elements.ayetTranslation.textContent = ayet.meal || '';
        }

        elements.prevAyetBtn.onclick = () => {
            showAyet(); // Rastgele Ã¶nceki ayet
            // Navigasyon - gÃ¶rev sayÄ±lmaz
        };

        elements.nextAyetBtn.onclick = () => {
            showAyet(); // Rastgele sonraki ayet
            // Navigasyon - gÃ¶rev sayÄ±lmaz
        };

        elements.ayetAudioBtn.onclick = () => {
            const ayet = ayetOkuData[currentAyetIndex];
            if (ayet && ayet.ayet_ses_dosyasi) {
                // EÄŸer ses Ã§alÄ±yorsa durdur
                if (currentAudio && !currentAudio.paused) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                }
                
                elements.ayetAudioBtn.disabled = true;
                currentAudio = new Audio(ayet.ayet_ses_dosyasi);
                
                currentAudio.play().catch(err => {
                    console.error('Ses hatasÄ±:', err);
                    elements.ayetAudioBtn.disabled = false;
                });
                
                // Ses sonuna kadar dinlendiÄŸinde gÃ¶rev sayÄ±lsÄ±n
                currentAudio.onended = () => {
                    elements.ayetAudioBtn.disabled = false;
                    // Daily task progress - SONUNA KADAR dinledi!
                    updateTaskProgress('ayetOku', 1);
                };
            }
        };

        // ============ HADÄ°S OKU MODU (RASTGELE) ============
        function showHadis() {
            // Rastgele hadis seÃ§
            currentHadisIndex = Math.floor(Math.random() * hadisData.length);
            const hadis = hadisData[currentHadisIndex];
            if (!hadis) return;

            elements.hadisCategory.textContent = hadis.section || '';
            elements.hadisTitle.textContent = hadis.chapterName || '';
            elements.hadisHeader.textContent = hadis.header || '';
            elements.hadisText.textContent = hadis.text || '';
            elements.hadisRef.textContent = hadis.refno || '';
        }

        elements.prevHadisBtn.onclick = () => {
            showHadis(); // Rastgele Ã¶nceki hadis
            // Daily task progress - hadis okuma
            updateTaskProgress('hadisOku', 1);
        };

        elements.nextHadisBtn.onclick = () => {
            showHadis(); // Rastgele sonraki hadis
            // Daily task progress - hadis okuma
            updateTaskProgress('hadisOku', 1);
        };

        // ============ OYUNU BAÅLAT ============
        loadData();
        updateStatsBar(); // Ä°statistik barÄ±nÄ± initialize et
            // Global debug fonksiyonu - console'dan Ã§aÄŸÄ±rÄ±labilir
            window.debugStats = function() {
                console.log('ğŸ”§ DEBUG - Mevcut Oyun Ä°statistikleri:');
                console.log('Total Points:', typeof totalPoints !== 'undefined' ? totalPoints : 'HenÃ¼z yÃ¼klenmedi');
                console.log('Star Points:', typeof starPoints !== 'undefined' ? starPoints : 'HenÃ¼z yÃ¼klenmedi');
                console.log('Level:', typeof level !== 'undefined' ? level : 'HenÃ¼z yÃ¼klenmedi');
                console.log('Session Score:', typeof sessionScore !== 'undefined' ? sessionScore : 'HenÃ¼z yÃ¼klenmedi');
            };

            // Seviye geÃ§iÅŸ test fonksiyonu - console'dan Ã§aÄŸÄ±rÄ±labilir
            window.testLevelUp = function(targetPoints) {
                console.log('ğŸ¯ Seviye geÃ§iÅŸ testi baÅŸlatÄ±lÄ±yor...');
                console.log('Mevcut puan:', totalPoints);
                console.log('Hedef puan:', targetPoints);
                
                // Hedef puana sÄ±Ã§rama
                const oldLevel = calculateLevel(totalPoints);
                totalPoints = targetPoints;
                const newLevel = calculateLevel(totalPoints);
                
                console.log('Eski seviye:', oldLevel);
                console.log('Yeni seviye:', newLevel);
                
                // Seviye atlama kontrolÃ¼
                if (newLevel > oldLevel) {
                    level = newLevel;
                    console.log('âœ… Seviye atlandÄ±! Modal gÃ¶steriliyor...');
                    showLevelUpModal(newLevel);
                } else {
                    console.log('âŒ Seviye atlanmadÄ±.');
                }
                
                updateStatsBar();
                saveStats(); // DeÄŸiÅŸiklikleri kaydet
            };

            // HÄ±zlÄ± seviye test fonksiyonlarÄ±
            window.testLevel2 = () => testLevelUp(1000);   // Seviye 2'ye Ã§Ä±k
            window.testLevel3 = () => testLevelUp(2500);   // Seviye 3'e Ã§Ä±k
            window.testLevel5 = () => testLevelUp(8500);   // Seviye 5'e Ã§Ä±k
            window.testLevel10 = () => testLevelUp(46000); // Seviye 10'a Ã§Ä±k
            window.resetPoints = () => { 
                totalPoints = 0; 
                level = 1; 
                updateStatsBar(); 
                saveStats(); 
                console.log('ğŸ”„ Puanlar sÄ±fÄ±rlandÄ±'); 
            };
            window.resetAllStats = resetAllStats;

            // Modal fonksiyonlarÄ±nÄ± global hale getir
            window.showBadgesModal = showBadgesModal;
            window.closeBadgesModal = closeBadgesModal;
            
            // SON ADIM: KaydedilmiÅŸ verileri yÃ¼kle
            try {
                // MOBÄ°L DEBUG - Alert ile gÃ¶ster
                const localStorageExists = typeof(Storage) !== "undefined";
                const savedPoints = localStorage.getItem('hasene_totalPoints');
                
                alert(`ï¿½ MOBÄ°L DEBUG:\n\nğŸ“Š localStorage mevcut: ${localStorageExists}\nğŸ’¾ KaydedilmiÅŸ puan: ${savedPoints}\nğŸ” Debug devam ediyor...`);
                
                loadStats();
                updateStatsBar();
                
                alert(`ï¿½ YÃœKLEME SONRASI:\n\nğŸ’° totalPoints: ${totalPoints}\nâ­ starPoints: ${starPoints}\nğŸ“ˆ level: ${level}`);
                
                console.log('âœ… localStorage debug tamamlandÄ±!');
            } catch (error) {
                alert(`âŒ HATA: ${error.message}`);
                console.error('âŒ Veri yÃ¼kleme hatasÄ±:', error);
            }
        
        }); // DOMContentLoaded event listener sonu

        // ============ PWA SERVICE WORKER KAYDI ============
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('ğŸ® SW registered: ', registration);
                        
                        // PWA yÃ¼kleme prompt'u
                        let deferredPrompt;
                        window.addEventListener('beforeinstallprompt', (e) => {
                            console.log('ğŸ’¾ PWA install prompt available');
                            e.preventDefault();
                            deferredPrompt = e;
                            
                            // Install button gÃ¶ster (isteÄŸe baÄŸlÄ±)
                            showPWAInstallPrompt(deferredPrompt);
                        });

                        // PWA yÃ¼klendiÄŸinde
                        window.addEventListener('appinstalled', (evt) => {
                            console.log('ğŸ“± PWA was installed');
                            alert('ğŸ‰ Hasene ArapÃ§a Oyunu baÅŸarÄ±yla yÃ¼klendi!\n\nArtÄ±k telefon masaÃ¼stÃ¼nden aÃ§abilirsiniz! ğŸš€');
                        });
                    })
                    .catch(registrationError => {
                        console.log('âŒ SW registration failed: ', registrationError);
                    });
            });

            // PWA Install Prompt fonksiyonu
            function showPWAInstallPrompt(deferredPrompt) {
                // 3 saniye sonra install prompt gÃ¶ster
                setTimeout(() => {
                    if (confirm('ğŸ“± Bu oyunu telefonunuza yÃ¼klemek ister misiniz?\n\nâœ… Offline oynayabilirsiniz\nğŸš€ Daha hÄ±zlÄ± aÃ§Ä±lÄ±r\nğŸ“² MasaÃ¼stÃ¼ ikonu oluÅŸur')) {
                        deferredPrompt.prompt();
                        deferredPrompt.userChoice.then((choiceResult) => {
                            if (choiceResult.outcome === 'accepted') {
                                console.log('âœ… User accepted the install prompt');
                            } else {
                                console.log('âŒ User dismissed the install prompt');
                            }
                            deferredPrompt = null;
                        });
                    }
                }, 3000);
            }
        }

    </script>
</body>
</html>
